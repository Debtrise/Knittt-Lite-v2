"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2958],{12558:(e,a,t)=>{t.d(a,{cn:()=>s});var r=t(43463),l=t(69795);function s(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,l.QP)((0,r.$)(a))}},43031:(e,a,t)=>{t.d(a,{p:()=>n});var r=t(95155),l=t(12115),s=t(12558);let n=l.forwardRef((e,a)=>{let{className:t,type:l,label:n,error:d,...i}=e;return(0,r.jsxs)("div",{className:"w-full",children:[n&&(0,r.jsx)("label",{htmlFor:i.id,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),(0,r.jsx)("input",{type:l,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",d?"border-red-500 focus-visible:ring-red-500":"",t),ref:a,...i}),d&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d})]})});n.displayName="Input"},52107:(e,a,t)=>{t.d(a,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>d,wL:()=>u});var r=t(95155),l=t(12115),s=t(67910);let n=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});n.displayName="Card";let d=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...l})});d.displayName="CardHeader";let i=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("h3",{ref:a,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});i.displayName="CardTitle";let o=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("p",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",t),...l})});o.displayName="CardDescription";let c=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,s.cn)("p-6 pt-0",t),...l})});c.displayName="CardContent";let u=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",t),...l})});u.displayName="CardFooter"},76631:(e,a,t)=>{t.d(a,{T:()=>n});var r=t(95155),l=t(12115),s=t(67910);let n=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...l})});n.displayName="Textarea"},88941:(e,a,t)=>{t.d(a,{bq:()=>m,eb:()=>g,gC:()=>x,l6:()=>c,yv:()=>u});var r=t(95155),l=t(12115),s=t(63409),n=t(51719),d=t(91902),i=t(98867),o=t(12558);let c=s.bL;s.YJ;let u=s.WT,m=l.forwardRef((e,a)=>{let{className:t,children:l,...d}=e;return(0,r.jsxs)(s.l9,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...d,children:[l,(0,r.jsx)(s.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=s.l9.displayName;let f=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)(s.PP,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})});f.displayName=s.PP.displayName;let p=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)(s.wn,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=s.wn.displayName;let x=l.forwardRef((e,a)=>{let{className:t,children:l,position:n="popper",...d}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsxs)(s.UC,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-white text-gray-800 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...d,children:[(0,r.jsx)(f,{}),(0,r.jsx)(s.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,r.jsx)(p,{})]})})});x.displayName=s.UC.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)(s.JU,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})}).displayName=s.JU.displayName;let g=l.forwardRef((e,a)=>{let{className:t,children:l,...n}=e;return(0,r.jsxs)(s.q7,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none hover:bg-gray-50 focus:bg-gray-100 focus:text-gray-900 data-[state=checked]:bg-gray-100 data-[state=checked]:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.VF,{children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})}),(0,r.jsx)(s.p4,{children:l})]})});g.displayName=s.q7.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)(s.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-gray-200",t),...l})}).displayName=s.wv.displayName},97214:(e,a,t)=>{t.d(a,{A:()=>f});var r=t(95155),l=t(12115),s=t(19393),n=t(22725),d=t(29191),i=t(60650),o=t(45220),c=t(44857),u=t(34639),m=t(30814);function f(e){let{recordingId:a,recordingName:t,audioUrl:f,onPlayStateChange:p}=e,[x,g]=(0,l.useState)(!1),[b,h]=(0,l.useState)(!1),[y,v]=(0,l.useState)(null),[N,w]=(0,l.useState)(0),[j,R]=(0,l.useState)(0),[k,C]=(0,l.useState)(1),[L,S]=(0,l.useState)(!1),[A,E]=(0,l.useState)(null),F=(0,l.useRef)(null);(0,l.useEffect)(()=>{U()},[U]),(0,l.useEffect)(()=>{let e=F.current;if(!e)return;let a=()=>w(e.currentTime),t=()=>R(e.duration),r=()=>{g(!1),w(0),null==p||p(!1)};return e.addEventListener("timeupdate",a),e.addEventListener("loadedmetadata",t),e.addEventListener("ended",r),()=>{e.removeEventListener("timeupdate",a),e.removeEventListener("loadedmetadata",t),e.removeEventListener("ended",r)}},[p]);let U=async()=>{if(f){v({id:a,isAvailable:!0,characterCount:0,canStream:!1,hasLocalFile:!0});return}try{let e=await u.Rk.getMetadata(a);v(e.data)}catch(e){console.warn("Failed to load metadata for recording ".concat(a,":"),e),v({id:a,isAvailable:!1,characterCount:0,canStream:!0,hasLocalFile:!1})}},T=async()=>{if(F.current)try{h(!0);let e=f,t=!1;if((null==y?void 0:y.canStream)&&!A)try{let r=await u.Rk.stream(a),l=new Blob([r.data],{type:"audio/mpeg"}),s=URL.createObjectURL(l);E(s),e=s,t=!0,m.oR.success("Streaming audio from Eleven Labs")}catch(e){if(console.error("Streaming failed, falling back to local file:",e),!f){m.oR.error("No audio available for playback");return}m.oR.info("Streaming unavailable, using local file")}if(!e){m.oR.error("No audio source available");return}F.current.src!==e&&(F.current.src=e),await F.current.play(),g(!0),null==p||p(!0);try{await u.Rk.trackUsage(a,{usedIn:"manual_call",entityType:"recording_player",entityId:0,playDuration:0,userAction:t?"stream_play":"local_play"})}catch(e){console.warn("Failed to track usage:",e)}}catch(e){console.error("Playback failed:",e),m.oR.error("Failed to play audio")}finally{h(!1)}},_=e=>{let a=Math.floor(e/60),t=Math.floor(e%60);return"".concat(a,":").concat(t.toString().padStart(2,"0"))},z=async()=>{try{let e=f;if(A)e=A;else if(null==y?void 0:y.canStream){let t=await u.Rk.stream(a),r=new Blob([t.data],{type:"audio/mpeg"});e=URL.createObjectURL(r)}if(e){let a=document.createElement("a");a.href=e,a.download="".concat(t,".mp3"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}else m.oR.error("No audio available for download")}catch(e){console.error("Download failed:",e),m.oR.error("Failed to download audio")}};(0,l.useEffect)(()=>()=>{A&&URL.revokeObjectURL(A)},[A]);let P=(null==y?void 0:y.isAvailable)||(null==y?void 0:y.canStream);return(0,r.jsxs)("div",{className:"flex items-center space-x-2 p-2 border rounded-lg bg-gray-50",children:[(0,r.jsx)("audio",{ref:F,preload:"none"}),(0,r.jsx)(s.$,{variant:"outline",size:"sm",onClick:x?()=>{F.current&&(F.current.pause(),g(!1),null==p||p(!1))}:T,disabled:!P||b,children:b?(0,r.jsx)("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-gray-300 border-t-gray-600"}):x?(0,r.jsx)(n.A,{className:"w-4 h-4"}):(0,r.jsx)(d.A,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 min-w-[35px]",children:_(N)}),(0,r.jsx)("input",{type:"range",min:"0",max:j||0,value:N,onChange:e=>{let a=F.current;if(a){let t=parseFloat(e.target.value);a.currentTime=t,w(t)}},className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",disabled:!j}),(0,r.jsx)("span",{className:"text-xs text-gray-500 min-w-[35px]",children:_(j)})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(s.$,{variant:"ghost",size:"sm",onClick:()=>{F.current&&(L?(F.current.volume=k,S(!1)):(F.current.volume=0,S(!0)))},className:"p-1",children:L?(0,r.jsx)(i.A,{className:"w-4 h-4"}):(0,r.jsx)(o.A,{className:"w-4 h-4"})}),(0,r.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:L?0:k,onChange:e=>{let a=parseFloat(e.target.value);C(a),F.current&&(F.current.volume=a),S(0===a)},className:"w-16 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,r.jsx)(s.$,{variant:"outline",size:"sm",onClick:z,disabled:!P,children:(0,r.jsx)(c.A,{className:"w-4 h-4"})}),y&&(0,r.jsxs)("div",{className:"text-xs text-gray-500 ml-2",children:[y.canStream&&(0,r.jsx)("span",{className:"bg-green-100 text-green-800 px-1 rounded mr-1",children:"Stream"}),y.hasLocalFile&&(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 px-1 rounded mr-1",children:"Local"}),y.characterCount>0&&(0,r.jsxs)("span",{children:[y.characterCount," chars"]})]})]})}}}]);