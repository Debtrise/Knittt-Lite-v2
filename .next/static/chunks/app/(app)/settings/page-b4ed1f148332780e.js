(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{12558:(e,s,i)=>{"use strict";i.d(s,{cn:()=>t});var a=i(43463),r=i(69795);function t(){for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];return(0,r.QP)((0,a.$)(s))}},23888:(e,s,i)=>{"use strict";i.d(s,{A:()=>a});let a=(0,i(67401).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},43031:(e,s,i)=>{"use strict";i.d(s,{p:()=>n});var a=i(95155),r=i(12115),t=i(12558);let n=r.forwardRef((e,s)=>{let{className:i,type:r,label:n,error:l,...d}=e;return(0,a.jsxs)("div",{className:"w-full",children:[n&&(0,a.jsx)("label",{htmlFor:d.id,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),(0,a.jsx)("input",{type:r,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l?"border-red-500 focus-visible:ring-red-500":"",i),ref:s,...d}),l&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]})});n.displayName="Input"},61833:(e,s,i)=>{Promise.resolve().then(i.bind(i,63539))},63539:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>v});var a=i(95155),r=i(12115),t=i(76046),n=i(69606),l=i(55037),d=i(23888),o=i(61594),c=i(92823),m=i(43831),u=i(68236),x=i(1169),g=i(19393),p=i(43031),f=i(85725),b=i(73746),h=i(34639);function v(){var e,s,i,v,j,y,C,N,w,A,k,S,P,I,L,T,q;let U=(0,t.useRouter)(),{isAuthenticated:E,user:R}=(0,b.n)(),[F,K]=(0,r.useState)(!0),[D,B]=(0,r.useState)([]),[_,X]=(0,r.useState)(null),[M,O]=(0,r.useState)(!1),[$,H]=(0,r.useState)(!1),[J,Q]=(0,r.useState)(null),[z,G]=(0,r.useState)(!1),[V,W]=(0,r.useState)(null),[Y,Z]=(0,r.useState)(!0),{register:ee,handleSubmit:es,setValue:ei,watch:ea,formState:{errors:er}}=(0,n.mN)({defaultValues:{apiConfig:{url:"",apiKey:"",apiSecret:"",groups:[],source:"BTR"},dialerConfig:{speed:1,minAgentsAvailable:1,autoDelete:!1,sortOrder:"oldest",didDistribution:"even"},schedule:[{enabled:!0,startTime:"09:00",endTime:"17:00"},{enabled:!0,startTime:"09:00",endTime:"17:00"},{enabled:!0,startTime:"09:00",endTime:"17:00"},{enabled:!0,startTime:"09:00",endTime:"17:00"},{enabled:!0,startTime:"09:00",endTime:"17:00"},{enabled:!1,startTime:"09:00",endTime:"17:00"},{enabled:!1,startTime:"09:00",endTime:"17:00"}],amiConfig:{host:"",port:0,trunk:"",context:"",username:"",password:""},elevenLabsConfig:{apiKey:""},freepbxConfig:{serverUrl:"",username:"",password:"",isActive:!1,autoUpload:!1}}}),et=async()=>{var e,s,i,a,r;if(!(null==_?void 0:null===(e=_.apiConfig)||void 0===e?void 0:e.ingroup)&&!(null==_?void 0:null===(s=_.apiConfig)||void 0===s?void 0:s.ingroups)){l.Ay.error("No agent groups configured");return}if(!(null==_?void 0:null===(i=_.apiConfig)||void 0===i?void 0:i.url)){l.Ay.error("No API URL configured");return}if(!(null==_?void 0:null===(a=_.apiConfig)||void 0===a?void 0:a.user)||!(null==_?void 0:null===(r=_.apiConfig)||void 0===r?void 0:r.password)){l.Ay.error("API credentials not configured");return}G(!0);try{let e=_.apiConfig.ingroup||_.apiConfig.ingroups,s=await (0,f._L)({url:_.apiConfig.url,ingroup:e,user:_.apiConfig.user,pass:_.apiConfig.password});B(Array.isArray(s)?s:[])}catch(e){console.error("Error fetching agent status:",e),l.Ay.error("Failed to fetch agent status"),B([])}finally{G(!1)}};(0,r.useEffect)(()=>{if(!E){U.push("/login");return}(async()=>{K(!0),Z(!0);try{var e,s,i,a,r,t,n,d,o,c,m,u,x,g;if(null==R?void 0:R.tenantId){let e=parseInt(R.tenantId,10),s=await (0,f.JR)(e);if(console.log("Retrieved tenant data:",s),X(s),s){let e=[];(null===(i=s.apiConfig)||void 0===i?void 0:i.ingroup)&&e.push(s.apiConfig.ingroup),(null===(a=s.apiConfig)||void 0===a?void 0:a.ingroups)&&s.apiConfig.ingroups!==(null===(r=s.apiConfig)||void 0===r?void 0:r.ingroup)&&e.push(...s.apiConfig.ingroups.split(",").filter(Boolean)),ei("apiConfig.url",(null===(t=s.apiConfig)||void 0===t?void 0:t.url)||""),ei("apiConfig.apiKey",(null===(n=s.apiConfig)||void 0===n?void 0:n.user)||""),ei("apiConfig.apiSecret",(null===(d=s.apiConfig)||void 0===d?void 0:d.password)||""),ei("apiConfig.groups",e),ei("apiConfig.source",(null===(o=s.apiConfig)||void 0===o?void 0:o.source)||"BTR"),ei("dialerConfig.speed",(null===(c=s.dialerConfig)||void 0===c?void 0:c.speed)||1),ei("dialerConfig.minAgentsAvailable",(null===(m=s.dialerConfig)||void 0===m?void 0:m.minAgentsAvailable)||1),ei("dialerConfig.autoDelete",(null===(u=s.dialerConfig)||void 0===u?void 0:u.autoDelete)||!1),ei("dialerConfig.sortOrder",(null===(x=s.dialerConfig)||void 0===x?void 0:x.sortOrder)||"oldest"),ei("dialerConfig.didDistribution",(null===(g=s.dialerConfig)||void 0===g?void 0:g.didDistribution)||"even"),s.schedule&&s.schedule.forEach((e,s)=>{"object"==typeof e&&null!==e&&(ei("schedule.".concat(s,".enabled"),e.enabled||!1),ei("schedule.".concat(s,".startTime"),e.startTime||"09:00"),ei("schedule.".concat(s,".endTime"),e.endTime||"17:00"))}),s.amiConfig&&(ei("amiConfig.host",s.amiConfig.host||""),ei("amiConfig.port",s.amiConfig.port||5038),ei("amiConfig.trunk",s.amiConfig.trunk||""),ei("amiConfig.context",s.amiConfig.context||""),ei("amiConfig.username",s.amiConfig.username||""),ei("amiConfig.password",s.amiConfig.password||"")),s.freepbxConfig&&(ei("freepbxConfig.serverUrl",s.freepbxConfig.serverUrl||""),ei("freepbxConfig.username",s.freepbxConfig.username||""),ei("freepbxConfig.password",s.freepbxConfig.password||""),ei("freepbxConfig.isActive",s.freepbxConfig.isActive||!1),ei("freepbxConfig.autoUpload",s.freepbxConfig.autoUpload||!1))}try{let e=await h.Rk.getConfig();W(e.data),ei("elevenLabsConfig.apiKey",e.data.apiKey||"")}catch(e){console.error("Error fetching Eleven Labs config:",e),W(null)}}((null==_?void 0:null===(e=_.apiConfig)||void 0===e?void 0:e.ingroup)||(null==_?void 0:null===(s=_.apiConfig)||void 0===s?void 0:s.ingroups))&&await et()}catch(e){console.error("Error fetching settings data:",e),l.Ay.error("Failed to load settings")}finally{K(!1),Z(!1)}})()},[E,U,R,ei]),(0,r.useEffect)(()=>{let e=setInterval(()=>{var e,s;((null==_?void 0:null===(e=_.apiConfig)||void 0===e?void 0:e.ingroup)||(null==_?void 0:null===(s=_.apiConfig)||void 0===s?void 0:s.ingroups))&&et()},5e3);return()=>clearInterval(e)},[et,null==_?void 0:null===(e=_.apiConfig)||void 0===e?void 0:e.ingroup,null==_?void 0:null===(s=_.apiConfig)||void 0===s?void 0:s.ingroups]);let en=async e=>{if(null==R?void 0:R.tenantId){O(!0);try{let s=parseInt(R.tenantId,10);console.log("Submitting form data:",e);let i=e.apiConfig.groups;Array.isArray(i)||"string"!=typeof i?Array.isArray(i)||(i=[]):i=i.split(",").map(e=>e.trim()).filter(Boolean),0===i.length&&(i=["TaxSales"]);let a=await (0,f.JR)(s),r={...a.apiConfig,url:e.apiConfig.url,user:e.apiConfig.apiKey,password:e.apiConfig.apiSecret,ingroup:i.length>0?i[0]:"TaxSales",ingroups:i.join(",")};console.log("Updating API config with:",r),await (0,f.QB)(s,{...a,apiConfig:r,dialerConfig:e.dialerConfig,schedule:e.schedule,amiConfig:e.amiConfig,freepbxConfig:e.freepbxConfig}),e.elevenLabsConfig.apiKey!==(null==V?void 0:V.apiKey)&&(await h.Rk.configure({apiKey:e.elevenLabsConfig.apiKey}),l.Ay.success("Eleven Labs configuration updated successfully")),l.Ay.success("Settings updated successfully");let t=await (0,f.JR)(s);X(t)}catch(e){console.error("Error updating settings:",e),l.Ay.error("Failed to update settings")}finally{O(!1)}}};return E?(0,a.jsx)(x.A,{children:(0,a.jsxs)("div",{className:"py-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Settings"}),(0,a.jsx)(g.$,{onClick:et,variant:"brand",isLoading:z,children:"Refresh Status"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(d.A,{className:"h-5 w-5 text-brand mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Agent Status"})]}),0===D.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(o.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No agent groups found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Configure agent groups in your settings."})]}):(0,a.jsx)("div",{className:"space-y-4",children:D.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-brand",children:e.ingroup}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand bg-opacity-10 text-brand",children:e.source})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 text-gray-500 mr-2"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.agents_logged_in," agents logged in"]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 text-gray-500 mr-2"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.agents_waiting," agents waiting"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 text-gray-500 mr-2"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.total_calls," total calls"]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 text-gray-500 mr-2"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.calls_waiting," calls waiting"]})]})]})]})]},e.ingroup))})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-brand mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"API Configuration"})]}),(0,a.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,a.jsx)("p",{className:"text-sm text-blue-800",children:"Your API credentials will be used to connect to the agent status service. Make sure all fields are filled correctly."})}),(0,a.jsxs)("form",{onSubmit:es(en),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API URL"}),(0,a.jsx)(p.p,{type:"text",...ee("apiConfig.url",{required:"API URL is required",pattern:{value:/^https?:\/\/.+/,message:"Please enter a valid URL starting with http:// or https://"}}),placeholder:"https://btr.ytel.com/x5/api/non_agent_api.php"}),(null===(i=er.apiConfig)||void 0===i?void 0:i.url)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.apiConfig.url.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Username"}),(0,a.jsx)(p.p,{type:"text",...ee("apiConfig.apiKey",{required:"API Username is required"}),placeholder:"Enter API username"}),(null===(v=er.apiConfig)||void 0===v?void 0:v.apiKey)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.apiConfig.apiKey.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Password"}),(0,a.jsx)(p.p,{type:"password",...ee("apiConfig.apiSecret",{required:"API Password is required"}),placeholder:"Enter API password"}),(null===(j=er.apiConfig)||void 0===j?void 0:j.apiSecret)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.apiConfig.apiSecret.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agent Groups (comma-separated)"}),(0,a.jsx)(p.p,{...ee("apiConfig.groups"),onChange:e=>{ei("apiConfig.groups",e.target.value.split(",").map(e=>e.trim()))},placeholder:"TaxSales, TaxSupport"})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(g.$,{type:"submit",variant:"brand",isLoading:M,children:"Save API Settings"})})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-brand mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Dialer Configuration"})]}),(0,a.jsxs)("form",{onSubmit:es(en),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dialer Speed"}),(0,a.jsx)(p.p,{type:"number",...ee("dialerConfig.speed",{required:"Dialer speed is required",min:{value:1,message:"Speed must be at least 1"}})}),(null===(y=er.dialerConfig)||void 0===y?void 0:y.speed)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.dialerConfig.speed.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Agents Available"}),(0,a.jsx)(p.p,{type:"number",...ee("dialerConfig.minAgentsAvailable",{required:"Minimum agents is required",min:{value:1,message:"Must have at least 1 agent"}})}),(null===(C=er.dialerConfig)||void 0===C?void 0:C.minAgentsAvailable)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.dialerConfig.minAgentsAvailable.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),(0,a.jsxs)("select",{...ee("dialerConfig.sortOrder"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand sm:text-sm",children:[(0,a.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,a.jsx)("option",{value:"fewest",children:"Fewest Calls First"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DID Distribution"}),(0,a.jsxs)("select",{...ee("dialerConfig.didDistribution"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand sm:text-sm",children:[(0,a.jsx)("option",{value:"even",children:"Even Distribution"}),(0,a.jsx)("option",{value:"local",children:"Local First"})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",...ee("dialerConfig.autoDelete"),className:"h-4 w-4 text-brand focus:ring-brand border-gray-300 rounded"}),(0,a.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Auto Delete Processed Leads"})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(g.$,{type:"submit",variant:"brand",isLoading:M,children:"Save Dialer Settings"})})]})]}),(0,a.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-brand mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Schedule"})]}),(0,a.jsx)("button",{type:"button",onClick:es(en),disabled:M,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-[#265871] hover:bg-[#1d4355] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#265871] transition-colors duration-200 font-poppins",children:M?"Saving...":"Save Schedule"})]}),(0,a.jsx)("div",{className:"space-y-6",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",...ee("schedule.".concat(s,".enabled")),className:"h-5 w-5 text-[#265871] focus:ring-[#265871] border-gray-300 rounded cursor-pointer"}),(0,a.jsx)("label",{className:"ml-3 block text-sm font-medium text-gray-700 w-24 cursor-pointer font-poppins",children:e})]})}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"time",...ee("schedule.".concat(s,".startTime")),className:"rounded-md border-gray-300 shadow-sm focus:border-[#265871] focus:ring-[#265871] sm:text-sm bg-white px-3 py-2 font-poppins",disabled:!ea("schedule.".concat(s,".enabled"))}),(0,a.jsx)("span",{className:"text-gray-500 font-poppins",children:"to"}),(0,a.jsx)("input",{type:"time",...ee("schedule.".concat(s,".endTime")),className:"rounded-md border-gray-300 shadow-sm focus:border-[#265871] focus:ring-[#265871] sm:text-sm bg-white px-3 py-2 font-poppins",disabled:!ea("schedule.".concat(s,".enabled"))})]})})]},e))})]}),(0,a.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-brand mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"AMI Configuration"})]}),(0,a.jsxs)("form",{onSubmit:es(en),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Host"}),(0,a.jsx)(p.p,{...ee("amiConfig.host",{required:"Host is required"})}),(null===(N=er.amiConfig)||void 0===N?void 0:N.host)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.amiConfig.host.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),(0,a.jsx)(p.p,{type:"number",...ee("amiConfig.port",{required:"Port is required",valueAsNumber:!0})}),(null===(w=er.amiConfig)||void 0===w?void 0:w.port)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.amiConfig.port.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trunk"}),(0,a.jsx)(p.p,{...ee("amiConfig.trunk",{required:"Trunk is required"})}),(null===(A=er.amiConfig)||void 0===A?void 0:A.trunk)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.amiConfig.trunk.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Context"}),(0,a.jsx)(p.p,{...ee("amiConfig.context",{required:"Context is required"})}),(null===(k=er.amiConfig)||void 0===k?void 0:k.context)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.amiConfig.context.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,a.jsx)(p.p,{...ee("amiConfig.username",{required:"Username is required"})}),(null===(S=er.amiConfig)||void 0===S?void 0:S.username)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.amiConfig.username.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsx)(p.p,{type:"password",...ee("amiConfig.password",{required:"Password is required"})}),(null===(P=er.amiConfig)||void 0===P?void 0:P.password)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.amiConfig.password.message})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(g.$,{type:"submit",variant:"brand",isLoading:M,children:"Save AMI Settings"})})]})]}),(0,a.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-brand mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Eleven Labs Configuration"})]}),(0,a.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,a.jsx)("p",{className:"text-sm text-blue-800",children:"Configure your Eleven Labs API key to enable text-to-speech functionality for recordings."})}),(0,a.jsxs)("form",{onSubmit:es(en),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),(0,a.jsx)(p.p,{type:"password",...ee("elevenLabsConfig.apiKey",{required:"API Key is required"}),placeholder:"Enter your Eleven Labs API key"}),(null===(I=er.elevenLabsConfig)||void 0===I?void 0:I.apiKey)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.elevenLabsConfig.apiKey.message})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(g.$,{type:"submit",variant:"brand",isLoading:M,children:"Save Eleven Labs Settings"})})]})]}),(0,a.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 text-brand mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"FreePBX Configuration"})]}),(0,a.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,a.jsx)("p",{className:"text-sm text-green-800",children:"Configure FreePBX integration to automatically upload recordings to your PBX system. Recordings will be available in FreePBX under Admin → System Recordings."})}),(0,a.jsxs)("form",{onSubmit:es(en),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"FreePBX Server URL"}),(0,a.jsx)(p.p,{type:"url",...ee("freepbxConfig.serverUrl",{required:"Server URL is required",pattern:{value:/^https?:\/\/.+/,message:"Please enter a valid URL starting with http:// or https://"}}),placeholder:"https://dial.knittt.com"}),(null===(L=er.freepbxConfig)||void 0===L?void 0:L.serverUrl)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.freepbxConfig.serverUrl.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,a.jsx)(p.p,{...ee("freepbxConfig.username",{required:"Username is required"}),placeholder:"admin"}),(null===(T=er.freepbxConfig)||void 0===T?void 0:T.username)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.freepbxConfig.username.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsx)(p.p,{type:"password",...ee("freepbxConfig.password",{required:"Password is required"}),placeholder:"Enter FreePBX password"}),(null===(q=er.freepbxConfig)||void 0===q?void 0:q.password)&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:er.freepbxConfig.password.message})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",...ee("freepbxConfig.isActive"),className:"h-4 w-4 text-brand focus:ring-brand border-gray-300 rounded"}),(0,a.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Enable FreePBX Integration"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",...ee("freepbxConfig.autoUpload"),className:"h-4 w-4 text-brand focus:ring-brand border-gray-300 rounded",disabled:!ea("freepbxConfig.isActive")}),(0,a.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Auto-upload recordings to FreePBX"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(g.$,{type:"button",variant:"outline",onClick:async()=>{let e=ea("freepbxConfig");try{H(!0);let s=await h.bS.test({serverUrl:e.serverUrl,username:e.username,password:e.password});l.Ay.success("FreePBX connection test successful! Connected to ".concat(s.data.version))}catch(a){var s,i;let e=(null===(i=a.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.error)||"FreePBX connection test failed";l.Ay.error(e)}finally{H(!1)}},isLoading:$,children:"Test Connection"}),(0,a.jsx)(g.$,{type:"submit",variant:"brand",isLoading:M,children:"Save FreePBX Settings"})]})]})]})]})}):null}}},e=>{var s=s=>e(e.s=s);e.O(0,[9272,2376,6514,5037,9606,1169,1485,8441,6587,7358],()=>s(61833)),_N_E=e.O()}]);