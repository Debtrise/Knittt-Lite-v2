(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7052],{12558:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var s=r(43463),a=r(69795);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},19393:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(95155),a=r(12115),l=r(31027),n=r(67910);let i=(0,l.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"bg-brand text-white hover:bg-brand/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:l,asChild:c=!1,isLoading:d,children:o,disabled:m,...u}=e;return(0,s.jsx)("button",{className:(0,n.cn)(i({variant:a,size:l,className:r})),ref:t,disabled:m||d,...u,children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o]}):o})});c.displayName="Button"},43031:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(95155),a=r(12115),l=r(12558);let n=a.forwardRef((e,t)=>{let{className:r,type:a,label:n,error:i,...c}=e;return(0,s.jsxs)("div",{className:"w-full",children:[n&&(0,s.jsx)("label",{htmlFor:c.id,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),(0,s.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i?"border-red-500 focus-visible:ring-red-500":"",r),ref:t,...c}),i&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i})]})});n.displayName="Input"},67194:(e,t,r)=>{Promise.resolve().then(r.bind(r,88030))},67910:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var s=r(43463),a=r(69795);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},87364:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(67401).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},87780:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(67401).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},88030:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(95155),a=r(12115),l=r(76046),n=r(55037),i=r(87364),c=r(92598),d=r(87780),o=r(1169),m=r(19393),u=r(43031),x=r(34639),h=r(73746);function g(){let e=(0,l.useRouter)(),{isAuthenticated:t}=(0,h.n)(),[r,g]=(0,a.useState)([]),[f,v]=(0,a.useState)(!0),[p,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)({}),[k,A]=(0,a.useState)(""),[C,E]=(0,a.useState)({name:"",content:"",categoryId:"",type:"sms",isActive:!0});(0,a.useEffect)(()=>{if(!t){e.push("/login");return}S()},[t,e]);let S=async()=>{try{var e;let t=(await x.Ay.templates.listCategories("sms")).data;g(t.categories||[]),(null===(e=t.categories)||void 0===e?void 0:e.length)>0&&E(e=>({...e,categoryId:t.categories[0].id.toString()}))}catch(e){console.error("Error fetching categories:",e),n.Ay.error("Failed to load categories")}finally{v(!1)}},I=async()=>{if(!C.name||!C.content||!C.categoryId){n.Ay.error("Please fill in all required fields");return}b(!0);try{let t={...C,categoryId:parseInt(C.categoryId)};await x.Ay.templates.create(t),n.Ay.success("Template created successfully"),e.push("/sms/templates")}catch(e){console.error("Error creating template:",e),n.Ay.error("Failed to create template")}finally{b(!1)}},P=e=>{E(t=>({...t,content:e}));let t=(e.match(/{{([^}]+)}}/g)||[]).map(e=>e.slice(2,-2)),r={...N};t.forEach(e=>{e in r||(r[e]="")}),w(r)},z=(e,t)=>{w(r=>({...r,[e]:t}))},M=()=>{let e=C.content;Object.entries(N).forEach(t=>{let[r,s]=t,a=RegExp("{{".concat(r,"}}"),"g");e=e.replace(a,s||"{{".concat(r,"}}"))}),A(e)};return((0,a.useEffect)(()=>{M()},[N,C.content]),f)?(0,s.jsx)(o.A,{children:(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand"})})}):(0,s.jsx)(o.A,{children:(0,s.jsxs)("div",{className:"py-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)(m.$,{variant:"secondary",onClick:()=>e.push("/sms/templates"),className:"mr-4",children:[(0,s.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Create Template"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Create a new SMS template"})]})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsxs)(m.$,{variant:"secondary",onClick:()=>j(!y),children:[(0,s.jsx)(c.A,{className:"w-4 h-4 mr-2"}),y?"Hide Preview":"Show Preview"]}),(0,s.jsxs)(m.$,{variant:"brand",onClick:I,disabled:p,children:[(0,s.jsx)(d.A,{className:"w-4 h-4 mr-2"}),p?"Creating...":"Create Template"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)(u.p,{type:"text",value:C.name,onChange:e=>E({...C,name:e.target.value}),placeholder:"Template name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,s.jsx)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand sm:text-sm",value:C.categoryId,onChange:e=>E({...C,categoryId:e.target.value}),children:r.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Content"}),(0,s.jsx)("textarea",{rows:6,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand sm:text-sm",value:C.content,onChange:e=>P(e.target.value),placeholder:"Template content. Use {{variable}} for dynamic content."}),(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Use ","{{"," variable ","}}","  syntax for dynamic content. Example: Hello ","{{"," name ","}}","!"]})]})]}),y&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Preview"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Fill in the variables below to preview the template"})]}),Object.keys(N).length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Variables"}),Object.entries(N).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t}),(0,s.jsx)(u.p,{type:"text",value:r,onChange:e=>z(t,e.target.value),placeholder:"Value for ".concat(t)})]},t)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Result"}),(0,s.jsx)("div",{className:"mt-1 p-4 rounded-md bg-gray-50 text-gray-900",children:k||"Preview will appear here"})]})]})]})]})})}},92598:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(67401).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[9272,2376,6514,5037,1169,8441,6587,7358],()=>t(67194)),_N_E=e.O()}]);