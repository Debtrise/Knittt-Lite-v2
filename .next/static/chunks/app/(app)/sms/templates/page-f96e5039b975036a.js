(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{12558:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(43463),r=a(69795);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},19393:(e,t,a)=>{"use strict";a.d(t,{$:()=>c});var s=a(95155),r=a(12115),l=a(31027),n=a(67910);let i=(0,l.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"bg-brand text-white hover:bg-brand/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:c=!1,isLoading:d,children:o,disabled:m,...x}=e;return(0,s.jsx)("button",{className:(0,n.cn)(i({variant:r,size:l,className:a})),ref:t,disabled:m||d,...x,children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o]}):o})});c.displayName="Button"},26764:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(67401).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},33473:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(67401).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},41260:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(95155),r=a(12115),l=a(76046),n=a(55037),i=a(67401);let c=(0,i.A)("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var d=a(33473);let o=(0,i.A)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var m=a(63348),x=a(26764),u=a(45686),h=a(1169),y=a(19393),g=a(43031),p=a(34639),f=a(73746);function b(){let e=(0,l.useRouter)(),{isAuthenticated:t}=(0,f.n)(),[a,i]=(0,r.useState)([]),[b,v]=(0,r.useState)([]),[j,N]=(0,r.useState)(!0),[w,k]=(0,r.useState)(!1),[A,C]=(0,r.useState)(!1),[S,M]=(0,r.useState)(null),[$,E]=(0,r.useState)(!1),[I,z]=(0,r.useState)(!1),[V,q]=(0,r.useState)({name:"",content:"",categoryId:"",variables:""}),[F,T]=(0,r.useState)({name:"",description:"",type:"sms"}),H=(0,r.useCallback)(async()=>{N(!0);try{let e=await p.Ay.templates.list({type:"sms",categoryId:S||void 0});i(e.data.templates||[])}catch(e){console.error("Error fetching templates:",e),n.Ay.error("Failed to load templates")}finally{N(!1)}},[S]),L=(0,r.useCallback)(async()=>{try{let e=await p.Ay.templates.listCategories("sms");v(e.data.categories||[])}catch(e){console.error("Error fetching categories:",e),n.Ay.error("Failed to load categories")}},[]);(0,r.useEffect)(()=>{if(!t){e.push("/login");return}H(),L()},[t,e,S,H,L]);let _=async e=>{if(e.preventDefault(),!V.name||!V.content||!V.categoryId){n.Ay.error("Please fill in all required fields");return}E(!0);try{let e=V.variables.split(",").map(e=>e.trim()).filter(e=>e.length>0),t=await p.Ay.templates.create({name:V.name,content:V.content,categoryId:parseInt(V.categoryId),variables:e,type:"sms"});i([...a,t.data]),n.Ay.success("Template created successfully"),k(!1),q({name:"",content:"",categoryId:"",variables:""})}catch(e){console.error("Error creating template:",e),n.Ay.error("Failed to create template")}finally{E(!1)}},D=async e=>{if(e.preventDefault(),!F.name){n.Ay.error("Please enter a category name");return}z(!0);try{let e=await p.Ay.templates.createCategory(F);v([...b,e.data]),n.Ay.success("Category created successfully"),C(!1),T({name:"",description:"",type:"sms"})}catch(e){console.error("Error creating category:",e),n.Ay.error("Failed to create category")}finally{z(!1)}},P=async e=>{if(confirm("Are you sure you want to delete this template?"))try{await p.Ay.templates.delete(Number(e)),i(a.filter(t=>t.id!==e)),n.Ay.success("Template deleted successfully")}catch(e){console.error("Error deleting template:",e),n.Ay.error("Failed to delete template")}},R=t=>{e.push("/sms/templates/".concat(t))};return(0,s.jsx)(h.A,{children:(0,s.jsxs)("div",{className:"py-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"SMS Templates"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your SMS templates and categories"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsxs)(y.$,{onClick:()=>C(!0),variant:"secondary",children:[(0,s.jsx)(c,{className:"w-4 h-4 mr-2"}),"New Category"]}),(0,s.jsxs)(y.$,{onClick:()=>k(!0),variant:"brand",children:[(0,s.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"New Template"]})]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[(0,s.jsx)(y.$,{variant:null===S?"brand":"secondary",onClick:()=>M(null),children:"All Templates"}),b.map(e=>(0,s.jsxs)(y.$,{variant:S===e.id?"brand":"secondary",onClick:()=>M(e.id),children:[(0,s.jsx)(o,{className:"w-4 h-4 mr-2"}),e.name]},e.id))]})}),w&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full",children:[(0,s.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Create New Template"}),(0,s.jsxs)("form",{onSubmit:_,children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)(g.p,{type:"text",value:V.name,onChange:e=>q({...V,name:e.target.value}),placeholder:"Template name",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,s.jsxs)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand sm:text-sm",value:V.categoryId,onChange:e=>q({...V,categoryId:e.target.value}),required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a category"}),b.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Content"}),(0,s.jsx)("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand sm:text-sm",rows:4,value:V.content,onChange:e=>q({...V,content:e.target.value}),placeholder:"Enter your template content. Use {{variable}} for variables.",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Variables (comma-separated)"}),(0,s.jsx)(g.p,{type:"text",value:V.variables,onChange:e=>q({...V,variables:e.target.value}),placeholder:"name, phone, email"})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,s.jsx)(y.$,{type:"button",variant:"secondary",onClick:()=>k(!1),children:"Cancel"}),(0,s.jsx)(y.$,{type:"submit",variant:"brand",isLoading:$,children:"Create Template"})]})]})]})}),A&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,s.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Create New Category"}),(0,s.jsxs)("form",{onSubmit:D,children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)(g.p,{type:"text",value:F.name,onChange:e=>T({...F,name:e.target.value}),placeholder:"Category name",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,s.jsx)("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand focus:ring-brand sm:text-sm",rows:3,value:F.description,onChange:e=>T({...F,description:e.target.value}),placeholder:"Category description"})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,s.jsx)(y.$,{type:"button",variant:"secondary",onClick:()=>C(!1),children:"Cancel"}),(0,s.jsx)(y.$,{type:"submit",variant:"brand",isLoading:I,children:"Create Category"})]})]})]})}),j?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand"})}):0===a.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(m.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No templates"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new template."})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:a.map(e=>(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.category})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>R(e.id),className:"text-gray-400 hover:text-gray-500",children:(0,s.jsx)(x.A,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>P(e.id),className:"text-gray-400 hover:text-red-500",children:(0,s.jsx)(u.A,{className:"h-5 w-5"})})]})]}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600 line-clamp-3",children:e.content}),e.variables.length>0&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Variables:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.variables.map(e=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:e},e))})]}),(0,s.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:["Last updated: ",new Date(e.updatedAt).toLocaleDateString()]})]},e.id))})]})})}},43031:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var s=a(95155),r=a(12115),l=a(12558);let n=r.forwardRef((e,t)=>{let{className:a,type:r,label:n,error:i,...c}=e;return(0,s.jsxs)("div",{className:"w-full",children:[n&&(0,s.jsx)("label",{htmlFor:c.id,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i?"border-red-500 focus-visible:ring-red-500":"",a),ref:t,...c}),i&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i})]})});n.displayName="Input"},45686:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(67401).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63348:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(67401).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},67910:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(43463),r=a(69795);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},95715:(e,t,a)=>{Promise.resolve().then(a.bind(a,41260))}},e=>{var t=t=>e(e.s=t);e.O(0,[9272,2376,6514,5037,1169,8441,6587,7358],()=>t(95715)),_N_E=e.O()}]);