(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8186],{12558:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(43463),s=r(69795);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},19393:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(95155),s=r(12115),i=r(31027),n=r(67910);let l=(0,i.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"bg-brand text-white hover:bg-brand/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,isLoading:d,children:o,disabled:u,...m}=e;return(0,a.jsx)("button",{className:(0,n.cn)(l({variant:s,size:i,className:r})),ref:t,disabled:u||d,...m,children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o]}):o})});c.displayName="Button"},32372:(e,t,r)=>{Promise.resolve().then(r.bind(r,63068))},33473:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},43031:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var a=r(95155),s=r(12115),i=r(12558);let n=s.forwardRef((e,t)=>{let{className:r,type:s,label:n,error:l,...c}=e;return(0,a.jsxs)("div",{className:"w-full",children:[n&&(0,a.jsx)("label",{htmlFor:c.id,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l?"border-red-500 focus-visible:ring-red-500":"",r),ref:t,...c}),l&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]})});n.displayName="Input"},45686:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},60872:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},63068:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(95155),s=r(12115),i=r(76046),n=r(55037),l=r(33473),c=r(60872),d=r(45686),o=r(1169),u=r(19393),m=r(43031),x=r(82651),h=r(73746);let p=r(2818).env.NEXT_PUBLIC_API_URL||"http://34.122.156.88:3001/api",y=x.A.create({baseURL:p,timeout:15e3,headers:{"Content-Type":"application/json"}});function g(){let e=(0,i.useRouter)(),{isAuthenticated:t}=(0,h.n)(),[r,x]=(0,s.useState)([]),[p,g]=(0,s.useState)(!0),[f,v]=(0,s.useState)(!1),[b,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(null),[k,C]=(0,s.useState)({name:"",description:""});(0,s.useEffect)(()=>{if(!t){e.push("/login");return}A()},[t,e]);let A=async()=>{try{let e=await y.get("/templates/categories",{params:{type:"sms"}});x(e.data.categories||[])}catch(e){console.error("Error fetching categories:",e),n.Ay.error("Failed to load categories")}finally{g(!1)}},S=async()=>{if(!k.name){n.Ay.error("Please enter a category name");return}v(!0);try{let e=await y.post("/templates/categories",{name:k.name,description:k.description,type:"sms"});n.Ay.success("Category created successfully"),j(!1),C({name:"",description:""}),x([...r,e.data.category])}catch(e){console.error("Error creating category:",e),n.Ay.error("Failed to create category")}finally{v(!1)}},$=async()=>{if(!N||!N.name){n.Ay.error("Please enter a category name");return}v(!0);try{let e=await y.put("/templates/categories/".concat(N.id),{name:N.name,description:N.description,type:"sms"});x(r.map(t=>t.id===N.id?e.data.category:t)),w(null),n.Ay.success("Category updated successfully")}catch(e){console.error("Error updating category:",e),n.Ay.error("Failed to update category")}finally{v(!1)}},M=async e=>{try{await y.delete("/templates/categories/".concat(e)),x(r.filter(t=>t.id!==e)),n.Ay.success("Category deleted successfully")}catch(e){n.Ay.error("Failed to delete category"),console.error("Delete error:",e)}};return p?(0,a.jsx)(o.A,{children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand"})})}):(0,a.jsx)(o.A,{children:(0,a.jsxs)("div",{className:"py-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Template Categories"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your SMS template categories"})]}),(0,a.jsxs)(u.$,{variant:"brand",onClick:()=>j(!0),children:[(0,a.jsx)(l.A,{className:"w-4 h-4 mr-2"}),"New Category"]})]}),b&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Category"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,a.jsx)(m.p,{type:"text",value:k.name,onChange:e=>C({...k,name:e.target.value}),placeholder:"Category name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)(m.p,{type:"text",value:k.description,onChange:e=>C({...k,description:e.target.value}),placeholder:"Category description"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(u.$,{variant:"secondary",onClick:()=>j(!1),children:"Cancel"}),(0,a.jsx)(u.$,{variant:"brand",onClick:S,isLoading:f,children:"Create Category"})]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(null==N?void 0:N.id)===e.id?(0,a.jsx)(m.p,{type:"text",value:N.name,onChange:e=>w({...N,name:e.target.value}),className:"w-full"}):(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(null==N?void 0:N.id)===e.id?(0,a.jsx)(m.p,{type:"text",value:N.description,onChange:e=>w({...N,description:e.target.value}),className:"w-full"}):(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.description})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(null==N?void 0:N.id)===e.id?(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(u.$,{variant:"secondary",onClick:()=>w(null),children:"Cancel"}),(0,a.jsx)(u.$,{variant:"brand",onClick:$,isLoading:f,children:"Save"})]}):(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(u.$,{variant:"secondary",onClick:()=>w(e),children:(0,a.jsx)(c.A,{className:"w-4 h-4"})}),(0,a.jsx)(u.$,{variant:"destructive",onClick:()=>M(e.id),children:(0,a.jsx)(d.A,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})})}y.interceptors.request.use(e=>{let t=h.n.getState().token,r=h.n.getState().user;return t&&(e.headers.Authorization="Bearer ".concat(t)),(null==r?void 0:r.tenantId)&&(e.headers["X-Tenant-ID"]=r.tenantId),e}),y.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(h.n.getState().logout(),window.location.href="/login"),Promise.reject(e)})},67910:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(43463),s=r(69795);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[9272,2376,6514,5037,1169,8441,6587,7358],()=>t(32372)),_N_E=e.O()}]);