(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{34639:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>h,Rk:()=>g,bS:()=>m,wo:()=>p});var o=s(82651),a=s(73746),r=s(2818);let n=r.env.NEXT_PUBLIC_API_URL||"http://34.122.156.88:3001/api",c=r.env.NEXT_PUBLIC_SMS_API_URL||"http://34.122.156.88:3100",l=o.A.create({baseURL:n,timeout:15e3,headers:{"Content-Type":"application/json"}}),i=o.A.create({baseURL:"/api",timeout:15e3,headers:{"Content-Type":"application/json"}}),d=o.A.create({baseURL:c,timeout:3e4,maxContentLength:0xa00000,maxBodyLength:0xa00000,headers:{"Content-Type":"application/json"}}),u=e=>{let t=a.n.getState().token,s=a.n.getState().user;if(t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t)),(null==s?void 0:s.tenantId)&&(e.headers=e.headers||{},e.headers["X-Tenant-ID"]=s.tenantId,e.url&&(e.url.includes("freepbx")||e.url.includes("upload-to-freepbx")))){let t=e.url.includes("?")?"&":"?";e.url+="".concat(t,"tenantId=").concat(s.tenantId)}return e};l.interceptors.request.use(u),i.interceptors.request.use(u),d.interceptors.request.use(u),l.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(a.n.getState().logout(),window.location.href="/login"),Promise.reject(e)}),i.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(a.n.getState().logout(),window.location.href="/login"),Promise.reject(e)});let p={list:e=>l.get("/transfer-groups",{params:e}),get:e=>l.get("/transfer-groups/".concat(e)),create:e=>l.post("/transfer-groups",e),update:(e,t)=>l.put("/transfer-groups/".concat(e),t),delete:e=>l.delete("/transfer-groups/".concat(e)),addNumber:(e,t)=>l.post("/transfer-groups/".concat(e,"/numbers"),t),updateNumber:(e,t,s)=>l.put("/transfer-groups/".concat(e,"/numbers/").concat(t),s),removeNumber:(e,t)=>l.delete("/transfer-groups/".concat(e,"/numbers/").concat(t)),getNextNumber:e=>l.get("/transfer-groups/".concat(e,"/next-number"))},g={getConfig:()=>l.get("/elevenlabs/config"),configure:e=>l.post("/elevenlabs/config",e),getVoices:()=>l.get("/elevenlabs/voices"),getUsage:()=>l.get("/elevenlabs/usage"),list:e=>l.get("/recordings",{params:e}),get:e=>l.get("/recordings/".concat(e)),create:e=>l.post("/recordings",e),update:(e,t)=>l.put("/recordings/".concat(e),t),delete:e=>l.delete("/recordings/".concat(e)),generateAudio:e=>l.post("/recordings/".concat(e,"/generate")),uploadAudio:e=>{let t=a.n.getState().user;return(null==t?void 0:t.tenantId)&&e.append("tenantId",t.tenantId),l.post("/recordings/upload",e,{headers:{"Content-Type":"multipart/form-data"}})},stream:e=>l.get("/recordings/".concat(e,"/stream"),{responseType:"blob",headers:{Accept:"audio/*"}}),getMetadata:e=>l.get("/recordings/".concat(e,"/metadata")),preview:e=>l.post("/recordings/preview",e),streamPreview:e=>l.get("/recordings/preview/".concat(e,"/stream"),{responseType:"blob",headers:{Accept:"audio/*"}}),batchPreview:e=>l.post("/recordings/preview/batch",e),getVoicePresets:()=>l.get("/recordings/voice-presets"),getAnalytics:(e,t)=>l.get("/recordings/".concat(e,"/analytics"),{params:t}),getUsageHistory:(e,t)=>l.get("/recordings/".concat(e,"/usage"),{params:t}),trackUsage:(e,t)=>l.post("/recordings/".concat(e,"/track-usage"),t)},m={test:e=>{let t=a.n.getState().user;return l.post("/recordings/test-freepbx",{...e,tenantId:(null==t?void 0:t.tenantId)||"1"})},syncRecording:async e=>{try{let t=a.n.getState().user,s=(null==t?void 0:t.tenantId)||"1";return await l.post("/recordings/".concat(e,"/sync-freepbx?tenantId=").concat(s),{tenantId:s})}catch(e){throw console.error("FreePBX sync error:",e),e}},uploadRecording:async e=>{try{let t=a.n.getState().user,s=(null==t?void 0:t.tenantId)||"1";return await l.post("/recordings/".concat(e,"/upload-to-freepbx?tenantId=").concat(s),{tenantId:s})}catch(e){var t,s,o,r;if((null===(t=e.response)||void 0===t?void 0:t.status)===404)throw Error("FreePBX upload functionality is not yet implemented on the backend. Please contact your system administrator.");if(null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:null===(s=o.error)||void 0===s?void 0:s.includes("Upload failed"))throw Error("FreePBX upload failed. Please check your FreePBX server connection and credentials.");throw e}}},h={auth:{login:(e,t)=>l.post("/login",{username:e,password:t}),register:e=>l.post("/register",e)},users:{list:e=>l.get("/users",{params:e}),get:e=>l.get("/users/".concat(e)),create:e=>{let t=a.n.getState().user;return l.post("/register",{...e,tenantId:(null==t?void 0:t.tenantId)||"1",role:e.role||"agent"})},update:(e,t)=>l.put("/users/".concat(e),t),delete:e=>l.delete("/users/".concat(e)),changePassword:e=>l.post("/users/change-password",e),me:()=>{let e=a.n.getState().user;return(null==e?void 0:e.userId)?l.get("/users/".concat(e.userId)):l.get("/users/me")}},tenants:{create:e=>l.post("/tenants",e),get:e=>l.get("/tenants/".concat(e)),update:(e,t)=>l.put("/tenants/".concat(e),t)},leads:{upload:(e,t)=>l.post("/leads/upload",{fileContent:e,options:t}),list:async e=>(await l.get("/leads",{params:e})).data,get:e=>l.get("/leads/".concat(e)),create:e=>l.post("/leads",e),update:(e,t)=>l.put("/leads/".concat(e),t),delete:e=>l.delete("/leads/".concat(e)),bulkDelete:e=>l.post("/leads/delete",{ids:e})},calls:{make:e=>l.post("/make-call",e),updateStatus:(e,t)=>l.put("/calls/".concat(e,"/status"),{status:t}),get:e=>l.get("/calls/".concat(e)),list:e=>l.get("/calls",{params:e})},dids:{list:e=>l.get("/dids",{params:e}),get:e=>l.get("/dids/".concat(e)),create:e=>l.post("/dids",e),update:(e,t)=>l.put("/dids/".concat(e),t),delete:e=>l.delete("/dids/".concat(e)),bulkDelete:e=>l.post("/dids/bulk-delete",{ids:e}),bulkUpload:e=>l.post("/dids/bulk-upload",{fileContent:e})},journeys:{list:e=>l.get("/journeys",{params:e}),get:e=>l.get("/journeys/".concat(e)),create:e=>l.post("/journeys",e),update:(e,t)=>l.put("/journeys/".concat(e),t),delete:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.delete("/journeys/".concat(e,"?force=").concat(t))},listSteps:e=>l.get("/journeys/".concat(e,"/steps")),createStep:(e,t)=>l.post("/journeys/".concat(e,"/steps"),t),updateStep:(e,t,s)=>l.put("/journeys/".concat(e,"/steps/").concat(t),s),deleteStep:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l.delete("/journeys/".concat(e,"/steps/").concat(t,"?force=").concat(s))},getLeads:(e,t)=>l.get("/journeys/".concat(e,"/leads"),{params:t}),enrollLeads:(e,t)=>l.post("/journeys/".concat(e,"/enroll"),t),enrollLeadsByCriteria:(e,t)=>l.post("/journeys/".concat(e,"/enroll-by-criteria"),t),getLeadJourneys:e=>l.get("/leads/".concat(e,"/journeys")),updateLeadJourneyStatus:(e,t,s)=>l.put("/leads/".concat(e,"/journeys/").concat(t,"/status"),s),executeStep:(e,t,s)=>l.post("/leads/".concat(e,"/journeys/").concat(t,"/execute"),s),getMatchingStats:e=>l.get("/journeys/".concat(e,"/matching-stats")),getStatistics:()=>l.get("/journeys/stats"),getStatsByBrand:()=>l.get("/stats/journeys/by-brand"),getStatsBySource:()=>l.get("/stats/journeys/by-source"),getUpcomingExecutions:e=>l.get("/executions/upcoming",{params:e})},webhooks:{list:e=>l.get("/webhooks",{params:e}),get:e=>l.get("/webhooks/".concat(e)),create:e=>l.post("/webhooks",e),update:(e,t)=>l.put("/webhooks/".concat(e),t),delete:e=>l.delete("/webhooks/".concat(e)),getEvents:(e,t)=>l.get("/webhooks/".concat(e,"/events"),{params:t}),test:(e,t)=>l.post("/webhooks/".concat(e,"/test"),t),regenerateKey:e=>l.post("/webhooks/".concat(e,"/regenerate-key")),regenerateToken:e=>l.post("/webhooks/".concat(e,"/regenerate-token")),health:e=>l.get("/webhook-health/".concat(e)),capabilities:()=>l.get("/system/webhook-capabilities")},sms:{getConfig:()=>l.get("/twilio/config"),saveConfig:e=>l.post("/twilio/config",e),testConnection:()=>l.post("/twilio/test"),listNumbers:()=>l.get("/twilio/numbers"),syncNumbers:()=>l.post("/twilio/numbers/sync"),send:e=>l.post("/sms/send",e),sendTemplate:e=>l.post("/sms/send-template",e),sendBulk:e=>l.post("/sms/send-bulk",e),getConversation:(e,t)=>l.get("/sms/conversation/".concat(e),{params:t}),listConversations:e=>l.get("/sms/conversations",{params:e}),getMessages:e=>l.get("/sms/messages",{params:e}),getMessage:e=>l.get("/sms/messages/".concat(e))},templates:{list:e=>l.get("/templates",{params:e}),get:e=>l.get("/templates/".concat(e)),create:e=>l.post("/templates",e),update:(e,t)=>l.put("/templates/".concat(e),t),delete:e=>l.delete("/templates/".concat(e)),listCategories:e=>l.get("/templates/categories",{params:{type:e}}),createCategory:e=>l.post("/templates/categories",e),updateCategory:(e,t)=>l.put("/templates/categories/".concat(e),t),deleteCategory:e=>l.delete("/templates/categories/".concat(e)),renderPreview:(e,t)=>l.post("/templates/".concat(e,"/render"),t)},transferGroups:p,email:{getConfig:()=>l.get("/email/config"),saveConfig:e=>l.post("/email/config",e),test:e=>l.post("/email/test",{to:e}),send:e=>l.post("/email/send",e)},reports:{generateCallSummary:e=>l.post("/reports/call-summary",e),generateSmsSummary:e=>l.post("/reports/sms-summary",e),generateAgentPerformance:e=>l.post("/reports/agent-performance",e),generateLeadConversion:e=>l.post("/reports/lead-conversion",e),generateJourneyAnalytics:e=>l.post("/reports/journey-analytics",e),generateCustom:e=>l.post("/reports/custom",e),export:e=>l.post("/reports/export",e)},reportTemplates:{list:()=>l.get("/report-templates"),get:e=>l.get("/report-templates/".concat(e)),create:e=>l.post("/report-templates",e),update:(e,t)=>l.put("/report-templates/".concat(e),t),delete:e=>l.delete("/report-templates/".concat(e)),execute:(e,t)=>l.post("/report-templates/".concat(e,"/execute"),t),schedule:(e,t)=>l.post("/report-templates/".concat(e,"/schedule"),t)},dashboard:{getStats:()=>l.get("/dashboard/stats"),getHistory:e=>l.get("/dashboard/history",{params:{hours:e}}),getTodayStats:()=>l.get("/stats/today"),getHourlyBreakdown:()=>l.get("/stats/hourly")},system:{getAgentStatus:e=>{let t={url:e.url,user:e.user,pass:e.pass,ingroups:e.ingroup};return l.get("/agent-status",{params:t})},getDailyReport:e=>l.get("/reports/daily",{params:{date:e}}),getModuleStatus:()=>l.get("/system/module-status"),getDialplanCapabilities:()=>l.get("/system/dialplan-capabilities")},recordings:g,freepbx:m}},58894:(e,t,s)=>{Promise.resolve().then(s.bind(s,82434))},73746:(e,t,s)=>{"use strict";s.d(t,{n:()=>r});var o=s(99827),a=s(60709);let r=(0,o.v)()((0,a.Zr)(e=>({token:null,user:null,isAuthenticated:!1,setAuth:(t,s)=>{e({token:t,user:s,isAuthenticated:!0})},logout:()=>{e({token:null,user:null,isAuthenticated:!1})}}),{name:"auth-storage",storage:{getItem:e=>{let t=localStorage.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch(e){return null}},setItem:(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},removeItem:e=>{localStorage.removeItem(e)}}}))},82434:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var o=s(95155),a=s(12115),r=s(76046),n=s(69606),c=s(48173),l=s.n(c),i=s(55037),d=s(34639),u=s(73746);function p(){let e=(0,r.useRouter)(),{setAuth:t}=(0,u.n)(),[s,c]=(0,a.useState)(!1),{register:p,handleSubmit:g,formState:{errors:m}}=(0,n.mN)(),h=async s=>{c(!0);try{let{token:o,userId:a,username:r,tenantId:n,role:c}=(await d.Ay.auth.login(s.username,s.password)).data;t(o,{userId:a,username:r,tenantId:n,role:c}),i.Ay.success("Login successful"),e.push("/dashboard")}catch(e){var o,a;console.error("Login error:",e),i.Ay.error((null===(a=e.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.error)||"Invalid username or password")}finally{c(!1)}};return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center gradient-animation",children:(0,o.jsxs)("div",{className:"max-w-md w-full space-y-8 p-8 bg-[#404040] rounded-lg shadow-lg relative z-10",children:[(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[(0,o.jsx)("div",{className:"w-32 h-32 mb-6",children:(0,o.jsx)("img",{src:"/logo.png",alt:"Knittt Logo",className:"w-full h-full object-contain"})}),(0,o.jsx)("h2",{className:"text-center text-5xl font-bold text-white mb-2 font-poppins",children:"Welcome to Knittt"}),(0,o.jsx)("p",{className:"text-center text-xl text-gray-300 font-semibold font-poppins",children:"Sign in to your account"})]}),(0,o.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:g(h),children:[(0,o.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"username",className:"sr-only",children:"Username"}),(0,o.jsx)("input",{id:"username",type:"text",...p("username",{required:"Username is required"}),className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-600 bg-white text-gray-900 placeholder-gray-500 rounded-t-md focus:outline-none focus:ring-2 focus:ring-[#265871] focus:border-[#265871] focus:z-10 sm:text-sm font-poppins",placeholder:"Username"}),m.username&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m.username.message})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,o.jsx)("input",{id:"password",type:"password",...p("password",{required:"Password is required"}),className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-600 bg-white text-gray-900 placeholder-gray-500 rounded-b-md focus:outline-none focus:ring-2 focus:ring-[#265871] focus:border-[#265871] focus:z-10 sm:text-sm font-poppins",placeholder:"Password"}),m.password&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m.password.message})]})]}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-[#265871] hover:bg-[#1d4355] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#265871] transition-colors duration-200 font-poppins",children:s?"Signing in...":"Sign in"})}),(0,o.jsx)("div",{className:"text-center",children:(0,o.jsxs)("p",{className:"text-sm text-white bg-[#333333] px-3 py-2 rounded",children:["Don't have an account?"," ",(0,o.jsx)(l(),{href:"/register",className:"font-medium text-blue-300 hover:text-blue-200",children:"Register here"})]})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9272,5037,9606,8441,6587,7358],()=>t(58894)),_N_E=e.O()}]);