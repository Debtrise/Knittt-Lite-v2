"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1485],{19393:(e,t,r)=>{r.d(t,{$:()=>i});var a=r(95155),o=r(12115),s=r(31027),n=r(67910);let c=(0,s.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"bg-brand text-white hover:bg-brand/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=o.forwardRef((e,t)=>{let{className:r,variant:o,size:s,asChild:i=!1,isLoading:d,children:l,disabled:u,...p}=e;return(0,a.jsx)("button",{className:(0,n.cn)(c({variant:o,size:s,className:r})),ref:t,disabled:u||d,...p,children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]}):l})});i.displayName="Button"},67910:(e,t,r)=>{r.d(t,{cn:()=>s});var a=r(43463),o=r(69795);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.QP)((0,a.$)(t))}},85725:(e,t,r)=>{r.d(t,{$2:()=>J,$i:()=>I,$v:()=>U,Ag:()=>Q,Ah:()=>z,Ak:()=>A,Aq:()=>V,Ay:()=>ef,B9:()=>ey,Bz:()=>C,Gk:()=>x,Hx:()=>Z,IJ:()=>X,JA:()=>K,JI:()=>eh,JR:()=>u,Kl:()=>q,LJ:()=>w,MF:()=>en,MH:()=>ep,OE:()=>eg,QB:()=>p,Qf:()=>ee,Rp:()=>W,SZ:()=>f,Ui:()=>D,Z9:()=>Y,_9:()=>v,_L:()=>m,_l:()=>er,_p:()=>O,a4:()=>_,a6:()=>G,aC:()=>R,ah:()=>h,au:()=>$,bz:()=>P,ft:()=>ed,gF:()=>es,hf:()=>E,iE:()=>el,jP:()=>S,jT:()=>b,kb:()=>B,mI:()=>M,mQ:()=>j,n3:()=>ec,nn:()=>ea,nz:()=>em,rJ:()=>y,s3:()=>F,s5:()=>ei,s6:()=>k,sc:()=>eo,sg:()=>et,sr:()=>g,tw:()=>T,v0:()=>ew,wV:()=>eu,wt:()=>N,xK:()=>H,yc:()=>L});var a=r(82651),o=r(73746),s=r(2818);let n=s.env.NEXT_PUBLIC_API_URL||"http://34.122.156.88:3001/api",c=s.env.NEXT_PUBLIC_SMS_API_URL||"http://34.122.156.88:3100",i=a.A.create({baseURL:n,timeout:15e3,headers:{"Content-Type":"application/json",Accept:"application/json"}}),d=a.A.create({baseURL:c,timeout:3e4,maxContentLength:0xa00000,maxBodyLength:0xa00000,maxRedirects:5,headers:{"Content-Type":"application/json",Accept:"application/json"}}),l=e=>{let t=o.n.getState().token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e};i.interceptors.request.use(l),d.interceptors.request.use(l),i.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(o.n.getState().logout(),window.location.href="/login"),Promise.reject(e)});let u=async e=>(await i.get("/tenants/".concat(e))).data,p=async(e,t)=>(await i.put("/tenants/".concat(e),t)).data,h=async e=>{let{page:t=1,limit:r=50,...a}=e||{},o={page:t,limit:r,...a};return(await i.get("/leads",{params:o})).data},y=async e=>(await i.get("/leads/".concat(e))).data,g=async e=>(await i.delete("/leads/".concat(e))).data,m=async e=>{try{if(console.log("getAgentStatus called with params:",e),!e.url)throw Error("URL is required for agent status check");if(!e.ingroup)throw Error("Ingroup is required for agent status check");if(!e.user)throw Error("User is required for agent status check");if(!e.pass)throw Error("Password is required for agent status check");let t={url:e.url,user:e.user,pass:e.pass,ingroups:e.ingroup};console.log("Sending to backend with params:",t);let r=await i.get("/agent-status",{params:t});console.log("getAgentStatus response:",r.data);let a=r.data;if(a&&Array.isArray(a.data))return a.data;if(Array.isArray(a))return a;return console.warn("Unexpected response format:",a),[]}catch(e){if(console.error("Error in getAgentStatus:",e),e.response){if(console.error("Response status:",e.response.status),console.error("Response data:",e.response.data),401===e.response.status)throw Error("Authentication failed. Please check your credentials.");if(404===e.response.status)throw Error("Agent status endpoint not found. Please check your URL configuration.");if(e.response.status>=500)throw Error("Server error occurred. Please try again later.");else if(400===e.response.status)throw Error("Invalid request parameters. Please check your configuration.")}else if(e.request)throw Error("Network error. Please check your connection and URL configuration.");throw e}},w=async e=>{let{page:t=1,limit:r=50,...a}=e||{},o={page:t,limit:r,...a};return(await i.get("/dids",{params:o})).data},f=async e=>(await i.get("/dids/".concat(e))).data,v=async e=>(await i.post("/dids",e)).data,b=async(e,t)=>(await i.put("/dids/".concat(e),t)).data,E=async e=>(await i.delete("/dids/".concat(e))).data,x=async e=>(await i.post("/dids/bulk-delete",{ids:e})).data,k=async e=>{let t=e.trim().split("\n");if(t.length<2)throw Error("CSV file must contain headers and at least one data row");let r=t[0].toLowerCase(),a=t.slice(1),o=r.split(",").map(e=>e.trim()),s=o.findIndex(e=>["phonenumber","phone_number","phone","did"].includes(e)),n=o.findIndex(e=>["description"].includes(e)),c=o.findIndex(e=>["areacode","area_code"].includes(e)),i=o.findIndex(e=>["state"].includes(e));if(-1===s)throw Error("CSV must contain a phone number column (phoneNumber, phone_number, phone, or did)");let d=0,l=0,u=[];for(let e=0;e<a.length;e++){let t=a[e].split(",").map(e=>e.trim()),r=t[s];if(!r){u.push({row:e+2,error:"Missing phone number"});continue}let o=r.replace(/\D/g,"");if(o.length<10||o.length>15){u.push({row:e+2,phoneNumber:r,error:"Invalid phone number format (must be 10-15 digits)"});continue}try{let e={phoneNumber:o,description:n>=0&&t[n]?t[n]:"Imported DID",areaCode:c>=0&&t[c]?t[c]:o.substring(0,3),state:i>=0&&t[i]?t[i]:""};await v(e),d++}catch(t){var p,h,y,g,m,w;(null===(p=t.response)||void 0===p?void 0:p.status)===409||(null===(g=t.response)||void 0===g?void 0:null===(y=g.data)||void 0===y?void 0:null===(h=y.error)||void 0===h?void 0:h.includes("already exists"))?(l++,u.push({row:e+2,phoneNumber:r,error:"DID already exists in system"})):u.push({row:e+2,phoneNumber:r,error:(null===(w=t.response)||void 0===w?void 0:null===(m=w.data)||void 0===m?void 0:m.error)||t.message||"Failed to create DID"})}}return{message:"".concat(d," DIDs imported successfully"),created:d,skipped:l,errors:u,summary:{totalRows:a.length,validDids:a.length-u.filter(e=>e.error.includes("Missing phone number")||e.error.includes("Invalid phone number")).length,created:d,alreadyExists:l,invalid:u.filter(e=>e.error.includes("Missing phone number")||e.error.includes("Invalid phone number")).length}}},R=async e=>{try{return(await i.post("/reports/call-summary",e)).data}catch(e){throw console.error("Error generating call summary report:",e),e}},C=async e=>{try{return(await i.post("/reports/sms-summary",e)).data}catch(e){throw console.error("Error generating SMS summary report:",e),e}},S=async e=>{try{return(await i.post("/reports/agent-performance",e)).data}catch(e){throw console.error("Error generating agent performance report:",e),e}},A=async e=>{try{return(await i.post("/reports/lead-conversion",e)).data}catch(e){throw console.error("Error generating lead conversion report:",e),e}},j=async e=>{try{return(await i.post("/reports/journey-analytics",e)).data}catch(e){throw console.error("Error generating journey analytics report:",e),e}},I=async e=>{try{return(await i.post("/reports/custom",e)).data}catch(e){throw console.error("Error generating custom report:",e),e}},P=async e=>{try{return(await i.post("/reports/export",e,{responseType:"blob"})).data}catch(e){throw console.error("Error exporting report:",e),e}},D=async()=>{try{return(await i.get("/report-templates")).data}catch(e){return console.error("Error fetching report templates:",e),[]}},L=async e=>{try{let{page:t=1,limit:r=50,status:a,templateId:o}=e||{},s={page:t,limit:r,...a?{status:a}:{},...o?{templateId:o}:{}};return(await i.get("/report-executions",{params:s})).data}catch(e){return console.error("Error fetching report executions:",e),{data:[],total:0,page:1,limit:50}}},N=async()=>{try{return(await i.get("/reports/today-stats")).data}catch(e){return console.error("Error fetching today's stats:",e),{totalCalls:0,smsSent:0,activeAgents:0,conversions:0}}},U=async()=>{try{return(await i.get("/reports/hourly-breakdown")).data}catch(e){return console.error("Error fetching hourly breakdown:",e),{}}},_=async e=>{try{return(await d.post("/campaigns",e)).data}catch(e){throw console.error("Create SMS Campaign Error:",e),e.response&&(console.error("Response data:",e.response.data),console.error("Response status:",e.response.status)),e}},T=async e=>{try{let{page:t=1,limit:r=20,status:a,search:o}=e||{},s={page:t,limit:r,...a?{status:a}:{},...o?{search:o}:{}};return(await d.get("/campaigns",{params:s})).data}catch(e){throw console.error("List SMS Campaigns Error:",e),e.response&&(console.error("Response data:",e.response.data),console.error("Response status:",e.response.status)),e}},M=async e=>{try{return(await d.get("/campaigns/".concat(e))).data}catch(t){throw console.error("Get SMS Campaign Details Error for ID ".concat(e,":"),t),t.response&&(console.error("Response data:",t.response.data),console.error("Response status:",t.response.status)),t}},q=async e=>{try{return(await d.post("/campaigns/".concat(e,"/start"))).data}catch(t){throw console.error("Start SMS Campaign Error for ID ".concat(e,":"),t),t.response&&(console.error("Response data:",t.response.data),console.error("Response status:",t.response.status)),t}},B=async e=>{try{return(await d.post("/campaigns/".concat(e,"/pause"))).data}catch(t){throw console.error("Pause SMS Campaign Error for ID ".concat(e,":"),t),t.response&&(console.error("Response data:",t.response.data),console.error("Response status:",t.response.status)),t}},z=async(e,t)=>{let r=0,a=null;for(;r<=2;)try{console.log("Attempt ".concat(r+1,"/").concat(3," to update rate limit for campaign ").concat(e));let a=new Promise((e,t)=>{setTimeout(()=>t(Error("Request timeout")),15e3)}),o=d.patch("/campaigns/".concat(e,"/rate-limit"),{rateLimit:t},{timeout:15e3}),s=await Promise.race([o,a]);return console.log("Rate limit update successful"),s.data}catch(t){if(a=t,r++,console.error("Attempt ".concat(r,"/").concat(3," failed:"),t.message||"Unknown error"),t.response)throw console.error("Server responded with error:",t.response.status),console.error("Error data:",t.response.data),t;if("Network Error"!==t.message&&"Request timeout"!==t.message)throw t;if(r>2)throw console.error("All retry attempts failed"),Error("Unable to connect to the server after ".concat(3," attempts. ")+"Please check your internet connection and try again later.");let e=1e3*Math.pow(2,r-1);console.log("Waiting ".concat(e,"ms before retry...")),await new Promise(t=>setTimeout(t,e))}throw a||Error("Unknown error occurred during rate limit update")},F=async(e,t)=>{try{return(await d.patch("/campaigns/".concat(e,"/auto-reply"),t)).data}catch(t){throw console.error("Configure Auto Reply Error for ID ".concat(e,":"),t),t.response&&(console.error("Response data:",t.response.data),console.error("Response status:",t.response.status)),t}},J=async e=>{try{return(await d.post("/campaigns/".concat(e,"/clear-unresponded"))).data}catch(t){throw console.error("Clear Unresponded Messages Error for ID ".concat(e,":"),t),t.response&&(console.error("Response data:",t.response.data),console.error("Response status:",t.response.status)),t}},V=async(e,t)=>{try{let r=t.get("file");if(!r)return(await d.post("/campaigns/".concat(e,"/upload"),t,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4})).data;{let t=new FormData;return t.append("contacts",r),(await d.post("/campaigns/".concat(e,"/upload"),t,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4})).data}}catch(e){if(console.error("Upload Campaign Contacts Error:",e),e.response&&(console.error("Response data:",e.response.data),console.error("Response status:",e.response.status)),"ECONNABORTED"===e.code)throw Error("Connection timeout. The server took too long to respond.");if("Network Error"===e.message)throw Error("Network connection failed. Please check your internet connection or the API server status.");throw e}},$=async(e,t)=>{try{let{page:r=1,limit:a=100,status:o,search:s}=t||{},n={page:r,limit:a,...o?{status:o}:{},...s?{search:s}:{}};return(await d.get("/campaigns/".concat(e,"/leads"),{params:n})).data}catch(t){throw console.error("Get Campaign Leads Error for ID ".concat(e,":"),t),t.response&&(console.error("Response data:",t.response.data),console.error("Response status:",t.response.status)),t}},Q=async e=>(await d.get("/contacts/".concat(e,"/conversation"))).data,G=async(e,t)=>(await d.post("/contacts/".concat(e,"/reply"),{message:t})).data,H=async e=>(await d.post("/twilio-numbers",e)).data,O=async e=>(await d.post("/twilio-numbers/upload",e,{headers:{"Content-Type":"multipart/form-data"}})).data,K=async()=>(await d.get("/twilio-numbers")).data,W=async(e,t)=>(await d.delete("/twilio-numbers/".concat(e),{params:t})).data,X=async e=>{let{page:t=1,limit:r=50}=e||{};return(await i.get("/journeys",{params:{page:t,limit:r}})).data},Z=async e=>(await i.get("/journeys/".concat(e))).data,Y=async e=>(await i.post("/journeys",e)).data,ee=async(e,t)=>(await i.put("/journeys/".concat(e),t)).data,et=async(e,t)=>{let r=new URLSearchParams;(null==t?void 0:t.force)&&r.append("force","true");let a="/journeys/".concat(e).concat(r.toString()?"?".concat(r.toString()):"");return(await i.delete(a)).data},er=async e=>(await i.get("/journeys/".concat(e,"/steps"))).data,ea=async(e,t)=>(await i.post("/journeys/".concat(e,"/steps"),t)).data,eo=async(e,t,r)=>(await i.put("/journeys/".concat(e,"/steps/").concat(t),r)).data,es=async(e,t,r)=>{let a=new URLSearchParams;(null==r?void 0:r.force)&&a.append("force","true");let o="/journeys/".concat(e,"/steps/").concat(t).concat(a.toString()?"?".concat(a.toString()):"");return(await i.delete(o)).data},en=async(e,t)=>{let{page:r=1,limit:a=50,...o}=t||{},s={page:r,limit:a,...o};return(await i.get("/journeys/".concat(e,"/leads"),{params:s})).data},ec=async(e,t)=>(await i.post("/journeys/".concat(e,"/enroll"),t)).data,ei=async(e,t)=>(await i.post("/journeys/".concat(e,"/enroll-by-criteria"),t)).data,ed=async e=>{try{return(await i.get("/journeys/".concat(e,"/matching-stats"))).data}catch(t){return console.error("Error fetching matching stats for journey ".concat(e,":"),t),{totalLeads:0,matchingLeads:0,criteriaBreakdown:{leadStatus:0,leadTags:0,leadAgeDays:0,brands:0,sources:0}}}},el=async(e,t,r)=>(await i.put("/journeys/".concat(t,"/leads/").concat(e,"/status"),r)).data,eu=async e=>{let{campaignId:t}=e;return(await i.get("/sms/".concat(t,"/unresponded"))).data},ep=async e=>(await i.post("/sms/mark-resolved",{contactIds:e})).data,eh=async e=>{let{contactIds:t,message:r}=e;return(await i.post("/sms/bulk-replies",{contactIds:t,message:r})).data},ey=async(e,t)=>(await i.post("/sms/contacts/".concat(e,"/reply"),{message:t})).data,eg=async e=>(await i.delete("/sms/twilio-numbers/bulk",{data:{numberIds:e}})).data,em=async e=>(await i.post("/sms/upload/preview",e,{headers:{"Content-Type":"multipart/form-data"}})).data,ew=async e=>(await i.post("/sms/upload/import-simplified",e,{headers:{"Content-Type":"multipart/form-data"}})).data,ef=i}}]);