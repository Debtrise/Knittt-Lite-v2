(()=>{var e={};e.id=6940,e.ids=[6940],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3736:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(41680).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},4339:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(41680).A)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},7702:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var r=t(82281),a=t(94805);function i(...e){return(0,a.QP)((0,r.$)(e))}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31134:(e,s,t)=>{Promise.resolve().then(t.bind(t,48394))},33873:e=>{"use strict";e.exports=require("path")},43517:(e,s,t)=>{"use strict";t.d(s,{$:()=>d});var r=t(45512),a=t(58009),i=t(21643),n=t(89808);let l=(0,i.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"bg-brand text-white hover:bg-brand/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:s,size:t,asChild:a=!1,isLoading:i,children:d,disabled:c,...o},x)=>(0,r.jsx)("button",{className:(0,n.cn)(l({variant:s,size:t,className:e})),ref:x,disabled:c||i,...o,children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]}):d}));d.displayName="Button"},45215:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var r=t(70260),a=t(28203),i=t(25155),n=t.n(i),l=t(67292),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let c={children:["",{children:["(app)",{children:["webhooks",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,48394)),"/Applications/Knittt-Lite-v2/app/(app)/webhooks/[id]/page.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,19611)),"/Applications/Knittt-Lite-v2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["/Applications/Knittt-Lite-v2/app/(app)/webhooks/[id]/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(app)/webhooks/[id]/page",pathname:"/webhooks/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},46724:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(45512),a=t(58009),i=t(79334),n=t(13868),l=t(43517),d=t(63451),c=t(89972),o=t(64985),x=t(67679),m=t(22403),h=t(3736),u=t(41680);let p=(0,u.A)("clipboard-copy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),g=(0,u.A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var j=t(70384),f=t(92557),y=t(4339),v=t(83083);function b({params:e}){let s=(0,i.useRouter)(),t=parseInt(e.id),[u,b]=(0,a.useState)(!0),[N,w]=(0,a.useState)(null),[k,R]=(0,a.useState)([]),[A,C]=(0,a.useState)(null),[E,L]=(0,a.useState)(""),[S,T]=(0,a.useState)(!1),[P,q]=(0,a.useState)(null),[_,M]=(0,a.useState)("details"),[B,F]=(0,a.useState)(!1),$=async()=>{b(!0);try{let e=await x.Ay.webhooks.getEvents(t.toString(),{page:1,limit:20}),s=e.data||e;R(s.events||s||[])}catch(e){console.error("Error fetching webhook events:",e),m.oR.error("Failed to load events")}finally{b(!1)}},I=async()=>{if(confirm("Are you sure? This will invalidate the current endpoint key.")){F(!0);try{let e=await x.Ay.webhooks.regenerateKey(t.toString()),s=e.data||e;w(e=>e?{...e,endpointKey:s.endpointKey}:null),m.oR.success("Endpoint key regenerated")}catch(e){console.error("Error regenerating key:",e),m.oR.error("Failed to regenerate key")}finally{F(!1)}}},W=async()=>{if(confirm("Are you sure? This will invalidate the current authentication token.")){F(!0);try{let e=await x.Ay.webhooks.regenerateToken(t.toString()),s=e.data||e;w(e=>e?{...e,authToken:s.authToken}:null),m.oR.success("Authentication token regenerated")}catch(e){console.error("Error regenerating token:",e),m.oR.error("Failed to regenerate token")}finally{F(!1)}}},z=async()=>{T(!0),q(null);try{let e;try{e=JSON.parse(E)}catch(e){m.oR.error("Invalid JSON payload");return}let s=await x.Ay.webhooks.test(t.toString(),e);q(s),m.oR.success("Webhook test completed")}catch(e){console.error("Error testing webhook:",e),m.oR.error("Failed to test webhook")}finally{T(!1)}};return(0,r.jsx)(n.A,{children:(0,r.jsxs)("div",{className:"container mx-auto py-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:u?"Loading webhook...":N?.name}),N&&(0,r.jsx)("p",{className:"text-gray-500",children:N.description})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(l.$,{onClick:()=>{s.push(`/webhooks/edit/${t}`)},className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Edit"})]}),(0,r.jsx)(l.$,{variant:"outline",onClick:()=>s.push("/webhooks"),className:"flex items-center gap-2",children:"Back to List"})]})]}),u?(0,r.jsx)("div",{className:"text-center py-8",children:"Loading webhook details..."}):N?(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)(o.tU,{defaultValue:"details",value:_,onValueChange:M,children:[(0,r.jsxs)(o.j7,{children:[(0,r.jsx)(o.Xi,{value:"details",children:"Details"}),(0,r.jsx)(o.Xi,{value:"events",children:"Events"}),(0,r.jsx)(o.Xi,{value:"testing",children:"Testing"}),N.conditionalRules?.enabled&&(0,r.jsx)(o.Xi,{value:"rules",children:"Conditional Rules"})]}),(0,r.jsx)(o.av,{value:"details",className:"space-y-4 pt-4",children:(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Webhook Details"}),(0,r.jsx)(d.BT,{children:"Configuration details for this webhook endpoint."})]}),(0,r.jsxs)(d.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,r.jsx)(c.E,{variant:N.isActive?"default":"secondary",className:"mt-1",children:N.isActive?"Active":"Inactive"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Created"}),(0,r.jsx)("p",{className:"text-gray-900",children:new Date(N.createdAt).toLocaleString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Brand"}),(0,r.jsx)("p",{className:"text-gray-900",children:N.brand})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Source"}),(0,r.jsx)("p",{className:"text-gray-900",children:N.source})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Webhook URL"}),(0,r.jsxs)("div",{className:"flex items-center mt-1 gap-2",children:[(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm flex-1",children:N.webhookUrl||`${process.env.NEXT_PUBLIC_API_URL}/api/webhook-receiver/${N.endpointKey}`}),(0,r.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>{if(!N)return;let e=N.webhookUrl||`${process.env.NEXT_PUBLIC_API_URL}/api/webhook-receiver/${N.endpointKey}`;navigator.clipboard.writeText(e),m.oR.success("Webhook URL copied to clipboard")},children:(0,r.jsx)(p,{className:"h-4 w-4"})}),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:I,disabled:B,children:[(0,r.jsx)(g,{className:"h-4 w-4 mr-1"}),"Regenerate Key"]})]})]})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Field Mapping"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Lead Field"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Source Field"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(N.fieldMapping).map(([e,s])=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e}),(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsx)("code",{className:"bg-gray-100 px-1 rounded text-xs",children:s})})]},e))})]})})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Validation Rules"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Require Phone: "}),N.validationRules.requirePhone?"Yes":"No"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Require Name: "}),N.validationRules.requireName?"Yes":"No"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Require Email: "}),N.validationRules.requireEmail?"Yes":"No"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Allow Duplicate Phone: "}),N.validationRules.allowDuplicatePhone?"Yes":"No"]})})]})]}),N.autoTagRules&&N.autoTagRules.length>0&&(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Auto Tag Rules"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Field"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Condition"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Tag"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:N.autoTagRules.map((e,s)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsx)("code",{className:"bg-gray-100 px-1 rounded text-xs",children:e.field})}),(0,r.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:["equals"===e.operator&&(0,r.jsxs)(r.Fragment,{children:["equals ",(0,r.jsxs)("strong",{children:['"',e.value,'"']})]}),"contains"===e.operator&&(0,r.jsxs)(r.Fragment,{children:["contains ",(0,r.jsxs)("strong",{children:['"',e.value,'"']})]}),"exists"===e.operator&&(0,r.jsx)(r.Fragment,{children:"exists"})]}),(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsx)(c.E,{variant:"outline",children:e.tag})})]},s))})]})})]}),N.securityToken&&(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Security"}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-sm",children:"Security Token: "}),(0,r.jsx)("code",{className:"bg-gray-100 px-1 rounded text-xs",children:N.securityToken})]}),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:W,disabled:B,children:[(0,r.jsx)(j.A,{className:"h-4 w-4 mr-1"}),"Regenerate Token"]})]})]}),N.requiredHeaders&&Object.keys(N.requiredHeaders).length>0&&(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Required Headers"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Header"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Value"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(N.requiredHeaders).map(([e,s])=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e}),(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsx)("code",{className:"bg-gray-100 px-1 rounded text-xs",children:s})})]},e))})]})})]}),(N.autoEnrollJourneyId||A)&&(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Auto Enrollment"}),A?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:A.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:A.description})]}),(0,r.jsx)(c.E,{variant:A.isActive?"default":"secondary",children:A.isActive?"Active":"Inactive"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Journey ID: ",N.autoEnrollJourneyId]})]}):(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Auto Enroll Journey ID: "}),N.autoEnrollJourneyId,(0,r.jsx)("span",{className:"text-xs text-red-500 ml-2",children:"(Journey not found)"})]})]})]})]})}),(0,r.jsx)(o.av,{value:"events",className:"space-y-4 pt-4",children:(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Webhook Events"}),(0,r.jsx)(d.BT,{children:"Recent events received by this webhook."})]}),(0,r.jsx)(d.Wu,{children:0===k.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"No events recorded for this webhook"}),(0,r.jsx)(l.$,{variant:"outline",onClick:()=>M("testing"),children:"Test Webhook"})]}):(0,r.jsx)("div",{className:"space-y-4",children:k.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(c.E,{variant:"success"===e.status?"default":"partial_success"===e.status?"outline":"destructive",children:e.status}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.receivedAt).toLocaleString()}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[e.processingTime,"ms"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["IP: ",e.ipAddress]}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["Leads: ",e.createdLeadIds.length]})]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Payload"}),(0,r.jsx)("div",{className:"bg-gray-50 rounded p-3 text-xs font-mono max-h-32 overflow-y-auto",children:(0,r.jsx)("pre",{children:JSON.stringify(e.payload,null,2)})})]}),"failed"===e.status&&e.errorMessage&&(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-red-700 mb-2",children:"Error Details"}),(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:(0,r.jsx)("p",{className:"text-sm text-red-800",children:e.errorMessage})})]}),"partial_success"===e.status&&e.errorMessage&&(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-yellow-700 mb-2",children:"Warnings"}),(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3",children:(0,r.jsx)("p",{className:"text-sm text-yellow-800",children:e.errorMessage})})]}),"success"===e.status&&e.createdLeadIds.length>0&&(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("h4",{className:"text-sm font-medium text-green-700 mb-2",children:["Successfully Created Leads (",e.createdLeadIds.length,")"]}),(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.createdLeadIds.map(e=>(0,r.jsxs)(c.E,{variant:"outline",className:"text-xs",children:["Lead #",e]},e))})})]}),(0,r.jsxs)("details",{className:"mt-3",children:[(0,r.jsx)("summary",{className:"text-sm text-gray-500 cursor-pointer hover:text-gray-700",children:"View Raw Event Data"}),(0,r.jsx)("div",{className:"mt-2 bg-gray-50 rounded p-3 text-xs font-mono max-h-40 overflow-y-auto",children:(0,r.jsx)("pre",{children:JSON.stringify(e,null,2)})})]})]},e.id))})}),(0,r.jsx)(d.wL,{children:(0,r.jsxs)(l.$,{variant:"ghost",size:"sm",onClick:$,className:"ml-auto",children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Refresh Events"]})})]})}),(0,r.jsx)(o.av,{value:"testing",className:"space-y-4 pt-4",children:(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Test Webhook"}),(0,r.jsx)(d.BT,{children:"Send a test payload to this webhook without creating actual leads."})]}),(0,r.jsxs)(d.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Test Payload"}),(0,r.jsx)(v.T,{value:E,onChange:e=>L(e.target.value),className:"font-mono text-sm",rows:10})]}),P&&(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Test Results"}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Status:"}),(0,r.jsx)(c.E,{variant:P.success?"default":"destructive",children:P.success?"Success":"Failed"})]}),(0,r.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Valid Leads:"}),(0,r.jsx)("span",{children:P.validCount})]}),(0,r.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,r.jsx)("span",{className:"font-medium",children:"Errors:"}),(0,r.jsx)("span",{children:P.errorCount})]}),P.errors&&P.errors.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium mb-2 text-red-700",children:"Error Details:"}),(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded p-3 max-h-40 overflow-y-auto",children:(0,r.jsx)("ul",{className:"list-disc list-inside text-sm text-red-800 space-y-1",children:P.errors.map((e,s)=>(0,r.jsx)("li",{children:e},s))})})]}),P.processedLeads&&P.processedLeads.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium mb-2 text-green-700",children:"Successfully Processed Leads:"}),(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded p-3 max-h-40 overflow-y-auto",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-green-200",children:[(0,r.jsx)("thead",{className:"bg-green-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-700 uppercase",children:"Phone"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-700 uppercase",children:"Name"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-700 uppercase",children:"Email"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-700 uppercase",children:"Brand"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-700 uppercase",children:"Source"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-green-200",children:P.processedLeads.map((e,s)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:e.phone}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:e.name||"-"}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:e.email||"-"}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:e.brand||"-"}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:e.source||"-"})]},s))})]})})})]}),N&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium mb-2 text-blue-700",children:"Field Mapping Validation:"}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:(0,r.jsx)("div",{className:"text-xs space-y-1",children:Object.entries(N.fieldMapping).map(([e,s])=>{let t=!1;try{let e=JSON.parse(E);t=!!(s&&void 0!==e[s])}catch(e){t=!1}return(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-blue-800",children:[e," ← ",s||"unmapped"]}),(0,r.jsx)(c.E,{variant:t?"default":"destructive",className:"text-xs",children:t?"Found":"Missing"})]},e)})})})]}),(0,r.jsxs)("details",{className:"mt-4",children:[(0,r.jsx)("summary",{className:"text-sm text-gray-500 cursor-pointer hover:text-gray-700",children:"View Raw Test Response"}),(0,r.jsx)("div",{className:"mt-2 bg-white border rounded p-3 text-xs font-mono max-h-40 overflow-y-auto",children:(0,r.jsx)("pre",{children:JSON.stringify(P,null,2)})})]})]})]})]}),(0,r.jsx)(d.wL,{children:(0,r.jsx)(l.$,{onClick:z,disabled:S,className:"ml-auto flex items-center gap-2",children:S?(0,r.jsx)(r.Fragment,{children:"Testing..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Run Test"})]})})})]})}),N.conditionalRules?.enabled&&(0,r.jsx)(o.av,{value:"rules",className:"space-y-4 pt-4",children:(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Conditional Rules Configuration"}),(0,r.jsx)(d.BT,{children:"Advanced conditional logic and automated actions for this webhook."})]}),(0,r.jsxs)(d.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,r.jsx)("span",{className:"font-medium text-green-800",children:"Conditional Processing Enabled"})]}),(0,r.jsxs)(c.E,{variant:"outline",className:"bg-green-100 text-green-800",children:["Logic: ",N.conditionalRules.logicOperator]})]}),N.conditionalRules.conditionSets?.map((e,s)=>r.jsxs(d.Zp,{className:"border-l-4 border-l-blue-500",children:[r.jsx(d.aR,{className:"pb-3",children:r.jsx(d.ZB,{className:"text-lg",children:e.name})}),r.jsxs(d.Wu,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Conditions"}),r.jsx("div",{className:"space-y-2",children:e.conditions?.map((e,s)=>r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx("code",{className:"bg-white px-2 py-1 rounded text-sm border",children:e.field}),r.jsx("span",{className:"text-sm text-gray-600",children:e.operator.replace("_"," ")}),!["exists","not_exists","is_empty","is_not_empty"].includes(e.operator)&&r.jsx(r.Fragment,{children:r.jsx("code",{className:"bg-white px-2 py-1 rounded text-sm border",children:"string"==typeof e.value?`"${e.value}"`:String(e.value)})}),r.jsx(c.E,{variant:"outline",className:"text-xs",children:e.dataType})]},s))})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:["Actions (",e.actions?.length||0,")"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.actions?.map((e,s)=>r.jsxs("div",{className:`border rounded-lg p-3 ${"delete_lead"===e.type?"bg-red-50 border-red-200":"bg-blue-50"}`,children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsxs(c.E,{variant:"delete_lead"===e.type?"destructive":"default",className:"text-xs",children:["delete_lead"===e.type&&"⚠️ ",e.type.replace("_"," ").toUpperCase()]})}),r.jsx("div",{className:`text-xs space-y-1 ${"delete_lead"===e.type?"text-red-700":"text-gray-600"}`,children:Object.entries(e.config||{}).map(([e,s])=>r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"font-medium",children:[e,":"]}),r.jsx("span",{className:"text-right max-w-32 truncate",title:String(s),children:String(s)})]},e))})]},s))})]})]})]},s)),(!N.conditionalRules.conditionSets||0===N.conditionalRules.conditionSets.length)&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)("p",{children:"No condition sets configured"}),(0,r.jsx)("p",{className:"text-sm",children:"Edit this webhook to add conditional rules"})]})]})]})})]})}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Webhook not found"}),(0,r.jsx)(l.$,{variant:"outline",onClick:()=>s.push("/webhooks"),children:"Back to Webhooks"})]})]})})}},48394:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Applications/Knittt-Lite-v2/app/(app)/webhooks/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Applications/Knittt-Lite-v2/app/(app)/webhooks/[id]/page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63451:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>l,wL:()=>x});var r=t(45512),a=t(58009),i=t(89808);let n=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));n.displayName="Card";let l=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle";let c=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));c.displayName="CardDescription";let o=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let x=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s}));x.displayName="CardFooter"},64985:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>l});var r=t(45512),a=t(58009),i=t(29248),n=t(89808);let l=i.bL,d=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.B8,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));d.displayName=i.B8.displayName;let c=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));c.displayName=i.l9.displayName;let o=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=i.UC.displayName},70384:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(41680).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},71302:(e,s,t)=>{Promise.resolve().then(t.bind(t,46724))},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83083:(e,s,t)=>{"use strict";t.d(s,{T:()=>n});var r=t(45512),a=t(58009),i=t(89808);let n=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));n.displayName="Textarea"},83997:e=>{"use strict";e.exports=require("tty")},89808:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var r=t(82281),a=t(94805);function i(...e){return(0,a.QP)((0,r.$)(e))}},89972:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var r=t(45512);t(58009);var a=t(21643),i=t(7702);let n=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return(0,r.jsx)("div",{className:(0,i.cn)(n({variant:s}),e),...t})}},92557:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(41680).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,1057,4052,5668,7519,6572,9388,1109,9248,931,3868],()=>t(45215));module.exports=r})();