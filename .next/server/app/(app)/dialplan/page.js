(()=>{var e={};e.id=293,e.ids=[293],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7702:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(82281),r=s(94805);function n(...e){return(0,r.QP)((0,a.$)(e))}},8818:(e,t,s)=>{"use strict";s.d(t,{AC:()=>x,BL:()=>o,ES:()=>n,OK:()=>m,RM:()=>u,U$:()=>j,YE:()=>y,aN:()=>f,ac:()=>r,cV:()=>w,g5:()=>h,gA:()=>i,ht:()=>d,mJ:()=>p,q6:()=>c,tq:()=>g,v:()=>v,xx:()=>l});var a=s(66581);let r=async()=>(await a.Ay.get("/dialplan/projects")).data,n=async e=>(await a.Ay.get(`/dialplan/projects/${e}`)).data,i=async e=>(await a.Ay.post("/dialplan/projects",e)).data,l=async e=>(await a.Ay.delete(`/dialplan/projects/${e}`)).data,o=async(e,t)=>(await a.Ay.post(`/dialplan/projects/${e}/clone`,{newName:t})).data,d=async e=>(await a.Ay.get(`/dialplan/projects/${e}/contexts`)).data,c=async(e,t)=>(await a.Ay.post(`/dialplan/projects/${e}/contexts`,t)).data,p=async e=>(await a.Ay.get(`/dialplan/contexts/${e}/nodes`)).data,u=async(e,t)=>{try{console.log("Creating node with data:",{contextId:e,data:t});let s=await a.Ay.post(`/dialplan/contexts/${e}/nodes`,t);return console.log("Node creation successful:",s.data),s.data}catch(e){throw console.error("Node creation failed:",e.response?.data||e.message||e),e}},m=async(e,t)=>(await a.Ay.put(`/dialplan/nodes/${e}`,t)).data,x=async e=>{try{if(console.log("Deleting node with ID:",e),!e||isNaN(e))throw Error("Invalid node ID");try{let t=await a.Ay.delete(`/dialplan/nodes/${e}`);return console.log("Node deletion successful:",t.data),t.data}catch(t){if(t.response?.status===404){console.warn("Standard delete endpoint not found, trying alternate endpoint...");let t=await a.Ay.post("/dialplan/nodes/delete",{id:e});return console.log("Node deletion successful with fallback:",t.data),t.data}throw t}}catch(s){s.response?console.error("Node deletion failed with response:",{status:s.response.status,data:s.response.data,headers:s.response.headers}):s.request?console.error("Node deletion failed - no response received:",s.request):console.error("Node deletion failed - error setting up request:",s.message);let e="Failed to delete node";s.response?.status===404?e="The node delete endpoint was not found on the server. The API may not be fully implemented.":s.message&&(e=s.message);let t=Error(e);throw t.cause=s,t}},h=async()=>(await a.Ay.get("/dialplan/node-types")).data,y=async e=>(await a.Ay.get(`/dialplan/contexts/${e}/connections`)).data,g=async e=>{try{console.log("Creating connection with data:",e);let t=await a.Ay.post("/dialplan/connections",e);return console.log("Connection creation successful:",t.data),t.data}catch(e){throw console.error("Connection creation failed:",e.response?.data||e.message||e),e}},f=async e=>{try{if(console.log("Deleting connection with ID:",e),!e||isNaN(e))throw Error("Invalid connection ID");try{let t=await a.Ay.delete(`/dialplan/connections/${e}`);return console.log("Connection deletion successful:",t.data),t.data}catch(t){if(t.response?.status===404){console.warn("Standard connection delete endpoint not found, trying alternate endpoint...");let t=await a.Ay.post("/dialplan/connections/delete",{id:e});return console.log("Connection deletion successful with fallback:",t.data),t.data}throw t}}catch(s){s.response?console.error("Connection deletion failed with response:",{status:s.response.status,data:s.response.data}):s.request?console.error("Connection deletion failed - no response received:",s.request):console.error("Connection deletion failed - error setting up request:",s.message);let e="Failed to delete connection";s.response?.status===404?e="The connection delete endpoint was not found on the server. The API may not be fully implemented.":s.message&&(e=s.message);let t=Error(e);throw t.cause=s,t}},j=async e=>{try{return(await a.Ay.post(`/dialplan/projects/${e}/validate`)).data}catch(e){return console.warn("Validate project endpoint may not be implemented yet"),{valid:!0,errors:[],warnings:[],timestamp:new Date().toISOString()}}},v=async e=>{try{return(await a.Ay.post(`/dialplan/projects/${e}/generate`)).data}catch(e){return console.warn("Generate dialplan endpoint may not be implemented yet"),{dialplan:"[default]\nexten => s,1,NoOp(Demo Dialplan)\nexten => s,n,Hangup()",project:"Demo Project",contexts:1,timestamp:new Date().toISOString()}}},w=async()=>(await a.Ay.get("/system/dialplan-capabilities")).data},9629:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Applications/Knittt-Lite-v2/app/(app)/dialplan/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Applications/Knittt-Lite-v2/app/(app)/dialplan/page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},18741:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(41680).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19904:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(41680).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37607:(e,t,s)=>{Promise.resolve().then(s.bind(s,53970))},47857:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=s(70260),r=s(28203),n=s(25155),i=s.n(n),l=s(67292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d={children:["",{children:["(app)",{children:["dialplan",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9629)),"/Applications/Knittt-Lite-v2/app/(app)/dialplan/page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"/Applications/Knittt-Lite-v2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Applications/Knittt-Lite-v2/app/(app)/dialplan/page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/(app)/dialplan/page",pathname:"/dialplan",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},49169:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(45512),r=s(58009),n=s(7702);let i=r.forwardRef(({className:e,type:t,label:s,error:r,...i},l)=>(0,a.jsxs)("div",{className:"w-full",children:[s&&(0,a.jsx)("label",{htmlFor:i.id,className:"block text-sm font-medium text-gray-700 mb-1",children:s}),(0,a.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r?"border-red-500 focus-visible:ring-red-500":"",e),ref:l,...i}),r&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r})]}));i.displayName="Input"},49656:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(41680).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},53970:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(45512),r=s(58009),n=s(79334),i=s(22403),l=s(18741),o=s(19904);let d=(0,s(41680).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var c=s(49656),p=s(13868),u=s(43517),m=s(49169),x=s(8818);function h(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)([]),[h,y]=(0,r.useState)(!0),[g,f]=(0,r.useState)(!1),[j,v]=(0,r.useState)(!1),[w,b]=(0,r.useState)(null),[N,A]=(0,r.useState)({name:"",description:""}),[P,k]=(0,r.useState)(""),[C,q]=(0,r.useState)(null),[D,$]=(0,r.useState)(null),S=async()=>{y(!0);try{let e=await (0,x.ac)();console.log("Projects data:",e),s(Array.isArray(e)?e:[])}catch(e){console.error("Error fetching projects:",e),$("Failed to load dialplan projects. Please try again later."),i.Ay.error("Failed to load dial plan projects")}finally{y(!1)}},E=async e=>{e.preventDefault();try{let e=await (0,x.gA)(N);console.log("Created project:",e),i.Ay.success("Project created successfully"),A({name:"",description:""}),f(!1),S()}catch(e){console.error("Error creating project:",e),i.Ay.error("Failed to create project")}},_=async e=>{if(confirm("Are you sure you want to delete this project? This action cannot be undone."))try{let t=await (0,x.xx)(e);console.log("Delete result:",t),i.Ay.success("Project deleted successfully"),S()}catch(e){console.error("Error deleting project:",e),i.Ay.error("Failed to delete project")}},I=async e=>{if(e.preventDefault(),w)try{let e=await (0,x.BL)(w,P);console.log("Cloned project:",e),i.Ay.success("Project cloned successfully"),k(""),v(!1),b(null),S()}catch(e){console.error("Error cloning project:",e),i.Ay.error("Failed to clone project")}},M=(e,t)=>{b(e),k(`${t} Copy`),v(!0)},z=e=>{if(!e)return"Never";try{return new Date(e).toLocaleString()}catch(e){return"Invalid date"}};return h&&!C?(0,a.jsx)(p.A,{children:(0,a.jsxs)("div",{className:"py-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Asterisk Dial Plan Builder"})}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"text-gray-500",children:"Checking Dial Plan Builder capabilities..."})})})]})}):D?(0,a.jsx)(p.A,{children:(0,a.jsxs)("div",{className:"py-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Asterisk Dial Plan Builder"})}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,a.jsxs)("div",{className:"text-center py-10",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-red-600 mb-2",children:"Error"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:D}),(0,a.jsx)(u.$,{variant:"default",onClick:()=>window.location.reload(),children:"Retry"})]})})]})}):!C||C.capabilities&&C.capabilities.generator?(0,a.jsx)(p.A,{children:(0,a.jsxs)("div",{className:"py-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Asterisk Dial Plan Builder"}),(0,a.jsxs)(u.$,{onClick:()=>f(!g),variant:"default",children:[(0,a.jsx)(l.A,{className:"w-4 h-4 mr-2"}),"New Project"]})]}),g&&(0,a.jsxs)("div",{className:"mb-6 bg-white shadow px-4 py-5 sm:rounded-lg sm:p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Project"}),(0,a.jsxs)("form",{onSubmit:E,children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[(0,a.jsx)("div",{className:"sm:col-span-3",children:(0,a.jsx)(m.p,{id:"projectName",label:"Project Name",type:"text",value:N.name,onChange:e=>A({...N,name:e.target.value}),required:!0})}),(0,a.jsxs)("div",{className:"sm:col-span-6",children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("textarea",{id:"description",rows:3,className:"shadow-sm focus:ring-brand focus:border-brand block w-full sm:text-sm border border-gray-300 rounded-md",value:N.description,onChange:e=>A({...N,description:e.target.value})})})]})]}),(0,a.jsxs)("div",{className:"mt-5 sm:mt-6 flex justify-end space-x-3",children:[(0,a.jsx)(u.$,{type:"button",variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),(0,a.jsx)(u.$,{type:"submit",variant:"default",disabled:!N.name,children:"Create Project"})]})]})]}),j&&(0,a.jsxs)("div",{className:"mb-6 bg-white shadow px-4 py-5 sm:rounded-lg sm:p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Clone Project"}),(0,a.jsxs)("form",{onSubmit:I,children:[(0,a.jsx)("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:(0,a.jsx)("div",{className:"sm:col-span-3",children:(0,a.jsx)(m.p,{id:"newProjectName",label:"New Project Name",type:"text",value:P,onChange:e=>k(e.target.value),required:!0})})}),(0,a.jsxs)("div",{className:"mt-5 sm:mt-6 flex justify-end space-x-3",children:[(0,a.jsx)(u.$,{type:"button",variant:"secondary",onClick:()=>{v(!1),b(null)},children:"Cancel"}),(0,a.jsx)(u.$,{type:"submit",variant:"default",disabled:!P,children:"Clone Project"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Dial Plan Projects"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Create and manage Asterisk dial plan configurations."})]}),h?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand"})}):0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No projects found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new dial plan project."})]}):(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project Name"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Deployed"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(t=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.name})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-500 max-w-md truncate",children:t.description})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.isActive?"Active":"Inactive"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z(t.lastDeployed)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsxs)(u.$,{onClick:()=>e.push(`/dialplan/${t.id}`),variant:"outline",size:"sm",className:"text-brand",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 mr-1"}),"Edit"]}),(0,a.jsxs)(u.$,{onClick:()=>M(t.id,t.name),variant:"outline",size:"sm",children:[(0,a.jsx)(d,{className:"w-4 h-4 mr-1"}),"Clone"]}),(0,a.jsxs)(u.$,{onClick:()=>_(t.id),variant:"outline",size:"sm",className:"text-red-500 hover:text-red-700",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 mr-1"}),"Delete"]})]})})]},t.id))})]})]})]})}):(0,a.jsx)(p.A,{children:(0,a.jsxs)("div",{className:"py-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Asterisk Dial Plan Builder"})}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,a.jsxs)("div",{className:"text-center py-10",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-red-600 mb-2",children:"Dial Plan Builder Module Limited"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"The Asterisk Dial Plan Builder module has limited capabilities. Some features may not work properly."}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Message: ",C.message]})]})})]})})}},54479:(e,t,s)=>{Promise.resolve().then(s.bind(s,9629))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,1057,4052,5668,7519,6572,9388,931,3868,9110],()=>s(47857));module.exports=a})();