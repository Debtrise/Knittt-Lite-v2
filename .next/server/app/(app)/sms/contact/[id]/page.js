(()=>{var e={};e.id=5892,e.ids=[5892],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7702:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(82281),i=r(94805);function n(...e){return(0,i.QP)((0,s.$)(e))}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},15607:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19744:(e,t,r)=>{Promise.resolve().then(r.bind(r,34976))},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32896:(e,t,r)=>{Promise.resolve().then(r.bind(r,73468))},33873:e=>{"use strict";e.exports=require("path")},34976:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(45512),i=r(58009),n=r(79334),a=r(22403),o=r(35668),l=r(15607),d=r(13868),c=r(43517),u=r(49169),p=r(66581),m=r(92666);function x(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),{isAuthenticated:r}=(0,m.n)(),[x,h]=(0,i.useState)(null),[f,b]=(0,i.useState)([]),[v,g]=(0,i.useState)(!0),[y,j]=(0,i.useState)(""),[w,N]=(0,i.useState)(!1),P=(0,i.useRef)(null),A=parseInt(e.id,10),q=()=>{P.current?.scrollIntoView({behavior:"smooth"})},k=async e=>{if(e.preventDefault(),!y.trim()){a.Ay.error("Please enter a message");return}if(y.length>1600){a.Ay.error("Message is too long. Maximum length is 1600 characters.");return}N(!0);try{let e=await (0,p.B9)(A,y);b(t=>[...t,e.sentMessage]),j(""),a.Ay.success("Reply sent successfully"),setTimeout(q,100)}catch(e){console.error("Error sending reply:",e),a.Ay.error("Failed to send reply. Please try again.")}finally{N(!1)}},_=e=>{let t=new Date(e);return t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})+" "+t.toLocaleDateString([],{month:"short",day:"numeric"})},C=e=>{switch(e){case"sent":return"✓";case"delivered":return"✓✓";case"read":return"✓✓ Read";case"failed":return"✕";default:return""}},S=e=>{switch(e){case"sent":case"delivered":default:return"text-blue-100";case"read":return"text-green-100";case"failed":return"text-red-100"}};return r?(0,s.jsx)(d.A,{children:(0,s.jsxs)("div",{className:"py-6 h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)(c.$,{variant:"ghost",onClick:()=>t.back(),className:"mr-4",children:(0,s.jsx)(o.A,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:x?.name||"Contact"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:x?.phone})]})]}),v?(0,s.jsx)("div",{className:"flex-grow flex justify-center items-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex-grow bg-white shadow overflow-hidden sm:rounded-lg p-4 mb-4 overflow-y-auto",children:(0,s.jsxs)("div",{className:"space-y-4",children:[0===f.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No messages in this conversation yet"}):f.map(e=>(0,s.jsx)("div",{className:`flex ${"outbound"===e.direction?"justify-end":"justify-start"}`,children:(0,s.jsxs)("div",{className:`max-w-xs sm:max-w-sm md:max-w-md rounded-lg px-4 py-2 
                          ${"outbound"===e.direction?"bg-brand text-white rounded-br-none":"bg-gray-200 text-gray-900 rounded-bl-none"}`,children:[(0,s.jsx)("div",{className:"text-sm",children:e.content}),(0,s.jsxs)("div",{className:`text-xs mt-1 flex items-center justify-between ${"outbound"===e.direction?"text-blue-100":"text-gray-500"}`,children:[(0,s.jsx)("span",{children:_(e.sentAt)}),"outbound"===e.direction&&(0,s.jsx)("span",{className:`ml-2 ${S(e.status)}`,children:C(e.status)})]})]})},e.id)),(0,s.jsx)("div",{ref:P})]})}),(0,s.jsx)("div",{className:"bg-white shadow sm:rounded-lg p-4",children:(0,s.jsxs)("form",{onSubmit:k,className:"flex space-x-2",children:[(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)(u.p,{type:"text",value:y,onChange:e=>j(e.target.value),placeholder:"Type your reply...",disabled:w,className:"w-full",autoFocus:!0})}),(0,s.jsxs)(c.$,{type:"submit",variant:"brand",isLoading:w,disabled:w||!y.trim(),children:[(0,s.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Send"]})]})})]})]})}):null}},35668:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},49169:(e,t,r)=>{"use strict";r.d(t,{p:()=>a});var s=r(45512),i=r(58009),n=r(7702);let a=i.forwardRef(({className:e,type:t,label:r,error:i,...a},o)=>(0,s.jsxs)("div",{className:"w-full",children:[r&&(0,s.jsx)("label",{htmlFor:a.id,className:"block text-sm font-medium text-gray-700 mb-1",children:r}),(0,s.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i?"border-red-500 focus-visible:ring-red-500":"",e),ref:o,...a}),i&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i})]}));a.displayName="Input"},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},60779:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(70260),i=r(28203),n=r(25155),a=r.n(n),o=r(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["(app)",{children:["sms",{children:["contact",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,73468)),"/Applications/Knittt-Lite-v2/app/(app)/sms/contact/[id]/page.tsx"]}]},{}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"/Applications/Knittt-Lite-v2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Applications/Knittt-Lite-v2/app/(app)/sms/contact/[id]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(app)/sms/contact/[id]/page",pathname:"/sms/contact/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73468:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Applications/Knittt-Lite-v2/app/(app)/sms/contact/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Applications/Knittt-Lite-v2/app/(app)/sms/contact/[id]/page.tsx","default")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,1057,4052,5668,7519,6572,9388,931,3868,9110],()=>r(60779));module.exports=s})();