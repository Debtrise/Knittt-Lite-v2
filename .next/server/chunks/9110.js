"use strict";exports.id=9110,exports.ids=[9110],exports.modules={43517:(e,r,t)=>{t.d(r,{$:()=>c});var a=t(45512),s=t(58009),o=t(21643),n=t(89808);let i=(0,o.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"bg-brand text-white hover:bg-brand/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef(({className:e,variant:r,size:t,asChild:s=!1,isLoading:o,children:c,disabled:d,...p},l)=>(0,a.jsx)("button",{className:(0,n.cn)(i({variant:r,size:t,className:e})),ref:l,disabled:d||o,...p,children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]}):c}));c.displayName="Button"},66581:(e,r,t)=>{t.d(r,{$2:()=>z,$i:()=>A,$v:()=>L,Ag:()=>V,Ah:()=>q,Ak:()=>S,Aq:()=>F,Ay:()=>ew,B9:()=>ey,Bz:()=>R,Gk:()=>v,Hx:()=>X,IJ:()=>W,JA:()=>O,JI:()=>eu,JR:()=>p,Kl:()=>M,LJ:()=>h,MF:()=>eo,MH:()=>el,OE:()=>eg,QB:()=>l,Qf:()=>Y,Rp:()=>K,SZ:()=>w,Ui:()=>I,Z9:()=>Z,_9:()=>f,_L:()=>m,_l:()=>er,_p:()=>H,a4:()=>U,a6:()=>Q,aC:()=>x,ah:()=>u,au:()=>J,bz:()=>j,ft:()=>ec,gF:()=>es,hf:()=>$,iE:()=>ed,jP:()=>k,jT:()=>b,kb:()=>_,mI:()=>T,mQ:()=>C,n3:()=>en,nn:()=>et,nz:()=>em,rJ:()=>y,s3:()=>B,s5:()=>ei,s6:()=>E,sc:()=>ea,sg:()=>ee,sr:()=>g,tw:()=>N,v0:()=>eh,wV:()=>ep,wt:()=>D,xK:()=>G,yc:()=>P});var a=t(85668),s=t(92666);let o=process.env.NEXT_PUBLIC_API_URL||"http://34.122.156.88:3001/api",n=process.env.NEXT_PUBLIC_SMS_API_URL||"http://34.122.156.88:3100",i=a.A.create({baseURL:o,timeout:15e3,headers:{"Content-Type":"application/json",Accept:"application/json"}}),c=a.A.create({baseURL:n,timeout:3e4,maxContentLength:0xa00000,maxBodyLength:0xa00000,maxRedirects:5,headers:{"Content-Type":"application/json",Accept:"application/json"}}),d=e=>{let r=s.n.getState().token;return r&&(e.headers.Authorization=`Bearer ${r}`),e};i.interceptors.request.use(d),c.interceptors.request.use(d),i.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(s.n.getState().logout(),window.location.href="/login"),Promise.reject(e)));let p=async e=>(await i.get(`/tenants/${e}`)).data,l=async(e,r)=>(await i.put(`/tenants/${e}`,r)).data,u=async e=>{let{page:r=1,limit:t=50,...a}=e||{},s={page:r,limit:t,...a};return(await i.get("/leads",{params:s})).data},y=async e=>(await i.get(`/leads/${e}`)).data,g=async e=>(await i.delete(`/leads/${e}`)).data,m=async e=>{try{if(console.log("getAgentStatus called with params:",e),!e.url)throw Error("URL is required for agent status check");if(!e.ingroup)throw Error("Ingroup is required for agent status check");if(!e.user)throw Error("User is required for agent status check");if(!e.pass)throw Error("Password is required for agent status check");let r={url:e.url,user:e.user,pass:e.pass,ingroups:e.ingroup};console.log("Sending to backend with params:",r);let t=await i.get("/agent-status",{params:r});console.log("getAgentStatus response:",t.data);let a=t.data;if(a&&Array.isArray(a.data))return a.data;if(Array.isArray(a))return a;return console.warn("Unexpected response format:",a),[]}catch(e){if(console.error("Error in getAgentStatus:",e),e.response){if(console.error("Response status:",e.response.status),console.error("Response data:",e.response.data),401===e.response.status)throw Error("Authentication failed. Please check your credentials.");if(404===e.response.status)throw Error("Agent status endpoint not found. Please check your URL configuration.");if(e.response.status>=500)throw Error("Server error occurred. Please try again later.");else if(400===e.response.status)throw Error("Invalid request parameters. Please check your configuration.")}else if(e.request)throw Error("Network error. Please check your connection and URL configuration.");throw e}},h=async e=>{let{page:r=1,limit:t=50,...a}=e||{},s={page:r,limit:t,...a};return(await i.get("/dids",{params:s})).data},w=async e=>(await i.get(`/dids/${e}`)).data,f=async e=>(await i.post("/dids",e)).data,b=async(e,r)=>(await i.put(`/dids/${e}`,r)).data,$=async e=>(await i.delete(`/dids/${e}`)).data,v=async e=>(await i.post("/dids/bulk-delete",{ids:e})).data,E=async e=>{let r=e.trim().split("\n");if(r.length<2)throw Error("CSV file must contain headers and at least one data row");let t=r[0].toLowerCase(),a=r.slice(1),s=t.split(",").map(e=>e.trim()),o=s.findIndex(e=>["phonenumber","phone_number","phone","did"].includes(e)),n=s.findIndex(e=>["description"].includes(e)),i=s.findIndex(e=>["areacode","area_code"].includes(e)),c=s.findIndex(e=>["state"].includes(e));if(-1===o)throw Error("CSV must contain a phone number column (phoneNumber, phone_number, phone, or did)");let d=0,p=0,l=[];for(let e=0;e<a.length;e++){let r=a[e].split(",").map(e=>e.trim()),t=r[o];if(!t){l.push({row:e+2,error:"Missing phone number"});continue}let s=t.replace(/\D/g,"");if(s.length<10||s.length>15){l.push({row:e+2,phoneNumber:t,error:"Invalid phone number format (must be 10-15 digits)"});continue}try{let e={phoneNumber:s,description:n>=0&&r[n]?r[n]:"Imported DID",areaCode:i>=0&&r[i]?r[i]:s.substring(0,3),state:c>=0&&r[c]?r[c]:""};await f(e),d++}catch(r){r.response?.status===409||r.response?.data?.error?.includes("already exists")?(p++,l.push({row:e+2,phoneNumber:t,error:"DID already exists in system"})):l.push({row:e+2,phoneNumber:t,error:r.response?.data?.error||r.message||"Failed to create DID"})}}return{message:`${d} DIDs imported successfully`,created:d,skipped:p,errors:l,summary:{totalRows:a.length,validDids:a.length-l.filter(e=>e.error.includes("Missing phone number")||e.error.includes("Invalid phone number")).length,created:d,alreadyExists:p,invalid:l.filter(e=>e.error.includes("Missing phone number")||e.error.includes("Invalid phone number")).length}}},x=async e=>{try{return(await i.post("/reports/call-summary",e)).data}catch(e){throw console.error("Error generating call summary report:",e),e}},R=async e=>{try{return(await i.post("/reports/sms-summary",e)).data}catch(e){throw console.error("Error generating SMS summary report:",e),e}},k=async e=>{try{return(await i.post("/reports/agent-performance",e)).data}catch(e){throw console.error("Error generating agent performance report:",e),e}},S=async e=>{try{return(await i.post("/reports/lead-conversion",e)).data}catch(e){throw console.error("Error generating lead conversion report:",e),e}},C=async e=>{try{return(await i.post("/reports/journey-analytics",e)).data}catch(e){throw console.error("Error generating journey analytics report:",e),e}},A=async e=>{try{return(await i.post("/reports/custom",e)).data}catch(e){throw console.error("Error generating custom report:",e),e}},j=async e=>{try{return(await i.post("/reports/export",e,{responseType:"blob"})).data}catch(e){throw console.error("Error exporting report:",e),e}},I=async()=>{try{return(await i.get("/report-templates")).data}catch(e){return console.error("Error fetching report templates:",e),[]}},P=async e=>{try{let{page:r=1,limit:t=50,status:a,templateId:s}=e||{},o={page:r,limit:t,...a?{status:a}:{},...s?{templateId:s}:{}};return(await i.get("/report-executions",{params:o})).data}catch(e){return console.error("Error fetching report executions:",e),{data:[],total:0,page:1,limit:50}}},D=async()=>{try{return(await i.get("/reports/today-stats")).data}catch(e){return console.error("Error fetching today's stats:",e),{totalCalls:0,smsSent:0,activeAgents:0,conversions:0}}},L=async()=>{try{return(await i.get("/reports/hourly-breakdown")).data}catch(e){return console.error("Error fetching hourly breakdown:",e),{}}},U=async e=>{try{return(await c.post("/campaigns",e)).data}catch(e){throw console.error("Create SMS Campaign Error:",e),e.response&&(console.error("Response data:",e.response.data),console.error("Response status:",e.response.status)),e}},N=async e=>{try{let{page:r=1,limit:t=20,status:a,search:s}=e||{},o={page:r,limit:t,...a?{status:a}:{},...s?{search:s}:{}};return(await c.get("/campaigns",{params:o})).data}catch(e){throw console.error("List SMS Campaigns Error:",e),e.response&&(console.error("Response data:",e.response.data),console.error("Response status:",e.response.status)),e}},T=async e=>{try{return(await c.get(`/campaigns/${e}`)).data}catch(r){throw console.error(`Get SMS Campaign Details Error for ID ${e}:`,r),r.response&&(console.error("Response data:",r.response.data),console.error("Response status:",r.response.status)),r}},M=async e=>{try{return(await c.post(`/campaigns/${e}/start`)).data}catch(r){throw console.error(`Start SMS Campaign Error for ID ${e}:`,r),r.response&&(console.error("Response data:",r.response.data),console.error("Response status:",r.response.status)),r}},_=async e=>{try{return(await c.post(`/campaigns/${e}/pause`)).data}catch(r){throw console.error(`Pause SMS Campaign Error for ID ${e}:`,r),r.response&&(console.error("Response data:",r.response.data),console.error("Response status:",r.response.status)),r}},q=async(e,r)=>{let t=0,a=null;for(;t<=2;)try{console.log(`Attempt ${t+1}/3 to update rate limit for campaign ${e}`);let a=new Promise((e,r)=>{setTimeout(()=>r(Error("Request timeout")),15e3)}),s=c.patch(`/campaigns/${e}/rate-limit`,{rateLimit:r},{timeout:15e3}),o=await Promise.race([s,a]);return console.log("Rate limit update successful"),o.data}catch(r){if(a=r,t++,console.error(`Attempt ${t}/3 failed:`,r.message||"Unknown error"),r.response)throw console.error("Server responded with error:",r.response.status),console.error("Error data:",r.response.data),r;if("Network Error"!==r.message&&"Request timeout"!==r.message)throw r;if(t>2)throw console.error("All retry attempts failed"),Error("Unable to connect to the server after 3 attempts. Please check your internet connection and try again later.");let e=1e3*Math.pow(2,t-1);console.log(`Waiting ${e}ms before retry...`),await new Promise(r=>setTimeout(r,e))}throw a||Error("Unknown error occurred during rate limit update")},B=async(e,r)=>{try{return(await c.patch(`/campaigns/${e}/auto-reply`,r)).data}catch(r){throw console.error(`Configure Auto Reply Error for ID ${e}:`,r),r.response&&(console.error("Response data:",r.response.data),console.error("Response status:",r.response.status)),r}},z=async e=>{try{return(await c.post(`/campaigns/${e}/clear-unresponded`)).data}catch(r){throw console.error(`Clear Unresponded Messages Error for ID ${e}:`,r),r.response&&(console.error("Response data:",r.response.data),console.error("Response status:",r.response.status)),r}},F=async(e,r)=>{try{let t=r.get("file");if(!t)return(await c.post(`/campaigns/${e}/upload`,r,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4})).data;{let r=new FormData;return r.append("contacts",t),(await c.post(`/campaigns/${e}/upload`,r,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4})).data}}catch(e){if(console.error("Upload Campaign Contacts Error:",e),e.response&&(console.error("Response data:",e.response.data),console.error("Response status:",e.response.status)),"ECONNABORTED"===e.code)throw Error("Connection timeout. The server took too long to respond.");if("Network Error"===e.message)throw Error("Network connection failed. Please check your internet connection or the API server status.");throw e}},J=async(e,r)=>{try{let{page:t=1,limit:a=100,status:s,search:o}=r||{},n={page:t,limit:a,...s?{status:s}:{},...o?{search:o}:{}};return(await c.get(`/campaigns/${e}/leads`,{params:n})).data}catch(r){throw console.error(`Get Campaign Leads Error for ID ${e}:`,r),r.response&&(console.error("Response data:",r.response.data),console.error("Response status:",r.response.status)),r}},V=async e=>(await c.get(`/contacts/${e}/conversation`)).data,Q=async(e,r)=>(await c.post(`/contacts/${e}/reply`,{message:r})).data,G=async e=>(await c.post("/twilio-numbers",e)).data,H=async e=>(await c.post("/twilio-numbers/upload",e,{headers:{"Content-Type":"multipart/form-data"}})).data,O=async()=>(await c.get("/twilio-numbers")).data,K=async(e,r)=>(await c.delete(`/twilio-numbers/${e}`,{params:r})).data,W=async e=>{let{page:r=1,limit:t=50}=e||{};return(await i.get("/journeys",{params:{page:r,limit:t}})).data},X=async e=>(await i.get(`/journeys/${e}`)).data,Z=async e=>(await i.post("/journeys",e)).data,Y=async(e,r)=>(await i.put(`/journeys/${e}`,r)).data,ee=async(e,r)=>{let t=new URLSearchParams;r?.force&&t.append("force","true");let a=`/journeys/${e}${t.toString()?`?${t.toString()}`:""}`;return(await i.delete(a)).data},er=async e=>(await i.get(`/journeys/${e}/steps`)).data,et=async(e,r)=>(await i.post(`/journeys/${e}/steps`,r)).data,ea=async(e,r,t)=>(await i.put(`/journeys/${e}/steps/${r}`,t)).data,es=async(e,r,t)=>{let a=new URLSearchParams;t?.force&&a.append("force","true");let s=`/journeys/${e}/steps/${r}${a.toString()?`?${a.toString()}`:""}`;return(await i.delete(s)).data},eo=async(e,r)=>{let{page:t=1,limit:a=50,...s}=r||{},o={page:t,limit:a,...s};return(await i.get(`/journeys/${e}/leads`,{params:o})).data},en=async(e,r)=>(await i.post(`/journeys/${e}/enroll`,r)).data,ei=async(e,r)=>(await i.post(`/journeys/${e}/enroll-by-criteria`,r)).data,ec=async e=>{try{return(await i.get(`/journeys/${e}/matching-stats`)).data}catch(r){return console.error(`Error fetching matching stats for journey ${e}:`,r),{totalLeads:0,matchingLeads:0,criteriaBreakdown:{leadStatus:0,leadTags:0,leadAgeDays:0,brands:0,sources:0}}}},ed=async(e,r,t)=>(await i.put(`/journeys/${r}/leads/${e}/status`,t)).data,ep=async({campaignId:e})=>(await i.get(`/sms/${e}/unresponded`)).data,el=async e=>(await i.post("/sms/mark-resolved",{contactIds:e})).data,eu=async({contactIds:e,message:r})=>(await i.post("/sms/bulk-replies",{contactIds:e,message:r})).data,ey=async(e,r)=>(await i.post(`/sms/contacts/${e}/reply`,{message:r})).data,eg=async e=>(await i.delete("/sms/twilio-numbers/bulk",{data:{numberIds:e}})).data,em=async e=>(await i.post("/sms/upload/preview",e,{headers:{"Content-Type":"multipart/form-data"}})).data,eh=async e=>(await i.post("/sms/upload/import-simplified",e,{headers:{"Content-Type":"multipart/form-data"}})).data,ew=i},89808:(e,r,t)=>{t.d(r,{cn:()=>o});var a=t(82281),s=t(94805);function o(...e){return(0,s.QP)((0,a.$)(e))}}};